{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\Overture\\\\DevOTWebUI\\\\src\\\\components\\\\ProfileBuilder\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport useConfiguration from '../../hooks/useConfiguration';\nimport useSessionStorage from \"../../hooks/useSessionStorage\";\nimport Header from \"../common/Header\";\nimport Sidebar from \"../common/Sidebar\";\nimport Footer from \"../common/Footer\";\nimport PageHeader from \"./pageHeader\";\nimport './profilebuilder.css';\nimport PersonalInfo from \"./PersonalInfo\";\nimport { getCurrentPersonalInfo, savePersonalInfo, resetErrorStatus } from './PersonalInfo/action';\nimport { saveResumeBuilder } from \"./ResumeBuilder/action\";\nimport { savePreference } from \"./Preference/action\";\nimport './index.css';\nimport Loader from \"../common/Loader\";\nimport { profileBuilderSelector } from './selector';\nimport { personalInfoSelector } from \"./PersonalInfo/selector\";\nimport { previousTab, gotoTab } from \"./action\";\nimport ResumeBuilder from \"./ResumeBuilder\";\nimport Preference from \"./Preference\";\nimport Summary from \"../Summary\";\nimport SaveSuccess from \"../SaveSuccess\";\nimport useValidation from \"../../hooks/useValidation\";\nimport { validateResume } from './ResumeBuilder/customResumeValidation';\nimport { resumeBuilderSelector } from \"./ResumeBuilder/selector\";\nimport { preferenceSelector } from \"./Preference/selector\";\nimport { loginSelector } from \"../Login/selector\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default _s(() => {\n  _s();\n\n  const [registrationErrors, setRegistrationErrors] = useState({});\n  const [emergencyContactErrors, setEmergencyContactErrors] = useState({});\n  const [referencesErrors, setReferencesErrors] = useState([]);\n  const [workHistoryErrors, setWorkHistoryErrors] = useState([]);\n  const [educationErrors, setEducationErrors] = useState([]);\n  const [resumeBuilderError, setResumeBuilderError] = useState({});\n  const [preferenceErrors, setPreferenceErrors] = useState({});\n  const dispatch = useDispatch();\n  const config = useConfiguration();\n  const storage = useSessionStorage();\n  const validate = useValidation();\n  const {\n    activeTab,\n    error,\n    errorMessage\n  } = useSelector(profileBuilderSelector);\n  const {\n    data\n  } = useSelector(personalInfoSelector);\n  const resumeForm = useSelector(resumeBuilderSelector);\n  const preferenceForm = useSelector(preferenceSelector);\n  const {\n    profileFlag\n  } = useSelector(loginSelector);\n  const login = storage.getItem(\"login\");\n  const successStage = activeTab === 'success';\n  useEffect(() => {\n    document.title = \"Profile Builder\";\n  }, []);\n  useEffect(() => {\n    if (config.baseUrl) {\n      dispatch(getCurrentPersonalInfo({\n        url: `${config.baseUrl}/Candidates/getpersonalinfo`,\n        userId: login.candidateId\n      }));\n    }\n  }, [config]);\n\n  const tabStyle = tabName => {\n    return activeTab === tabName ? 'nav-item active' : 'nav-item';\n  };\n\n  const validatePersonalInfo = () => {\n    const keys = Object.keys(data);\n    const registrationResult = validate(\"personalInfo\", keys.map(key => {\n      return {\n        name: key,\n        data: data[key]\n      };\n    }));\n\n    if (registrationResult.valid) {\n      setRegistrationErrors({});\n    } else {\n      setRegistrationErrors(registrationResult.errors);\n    }\n\n    return registrationResult.valid;\n  };\n\n  const validateEmergencyContact = () => {\n    const keys = Object.keys(data.emergencyContact);\n    const emergencyResult = validate(\"emergencyContact\", keys.map(key => {\n      return {\n        name: key,\n        data: data.emergencyContact[key]\n      };\n    }));\n\n    if (emergencyResult.valid) {\n      setEmergencyContactErrors({});\n    } else {\n      setEmergencyContactErrors(emergencyResult.errors);\n    }\n\n    return emergencyResult.valid;\n  };\n\n  const validateReferences = () => {\n    const validationResults = data.references.map((ref, index) => {\n      const keys = Object.keys(ref);\n      const anyFilled = keys.some(key => ref[key]); //if(index === 0 || anyFilled) {\n\n      if (anyFilled) {\n        return validate(\"references\", keys.map(key => {\n          return {\n            name: key,\n            data: ref[key]\n          };\n        }));\n      } else {\n        return {\n          valid: true\n        };\n      }\n    });\n    const valid = validationResults.every(result => result.valid);\n\n    if (valid) {\n      setReferencesErrors([]);\n    } else {\n      setReferencesErrors(validationResults.map(result => result.errors));\n    }\n\n    return valid;\n  };\n\n  const validatePreferences = () => {\n    const preferenceKeys = Object.keys(preferenceForm);\n    const validationResult = validate(\"preferences\", preferenceKeys.map(key => {\n      return {\n        name: key,\n        data: preferenceForm[key]\n      };\n    }));\n\n    if (validationResult.valid) {\n      setPreferenceErrors({});\n    } else {\n      setPreferenceErrors(validationResult.errors);\n    }\n\n    return validationResult.valid;\n  };\n\n  const validateNoResume = () => {\n    if (resumeForm.data.noResume) {\n      const workHistoryValidationResult = resumeForm.workHistory.map((ref, index) => {\n        const keys = Object.keys(ref);\n        const anyFilled = keys.some(key => ref[key]);\n\n        if (index === 0 || anyFilled) {\n          return validate(\"workHistory\", keys.map(key => {\n            return {\n              name: key,\n              data: ref[key]\n            };\n          }));\n        } else {\n          return {\n            valid: true\n          };\n        }\n      });\n      const educationValidationResult = resumeForm.educationList.map((ref, index) => {\n        const keys = Object.keys(ref);\n        const anyFilled = keys.some(key => ref[key]);\n\n        if (index === 0 || anyFilled) {\n          return validate(\"education\", keys.map(key => {\n            return {\n              name: key,\n              data: ref[key]\n            };\n          }));\n        } else {\n          return {\n            valid: true\n          };\n        }\n      });\n      const valid = workHistoryValidationResult.every(result => result.valid) && educationValidationResult.every(result => result.valid);\n\n      if (valid) {\n        setEducationErrors([]);\n        setWorkHistoryErrors([]);\n      } else {\n        setEducationErrors(educationValidationResult.map(result => result.errors));\n        setWorkHistoryErrors(workHistoryValidationResult.map(result => result.errors));\n      }\n\n      return valid;\n    } else {\n      return true;\n    }\n  };\n\n  const saveContinue = function (currentTab) {\n    let gotoNextTab = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    window.scrollTo(0, 0);\n    dispatch(resetErrorStatus());\n    let valid = true;\n\n    if (currentTab === 'personalInfo') {\n      if (validatePersonalInfo() && validateEmergencyContact() && validateReferences()) {\n        dispatch(savePersonalInfo({\n          url: `${config.baseUrl}/Candidates/savepersonalinfo/`,\n          candidateId: login.candidateId,\n          userId: login.appUserId,\n          gotoNextTab\n        }));\n      } else {\n        valid = false;\n      }\n    } else if (currentTab === 'resumeBuilder') {\n      const resumeFormValid = validateResume(resumeForm);\n\n      if (validateNoResume() && resumeFormValid.isValid) {\n        dispatch(saveResumeBuilder({\n          url: `${config.baseUrl}`,\n          candidateId: login.candidateId,\n          userId: login.appUserId,\n          gotoNextTab\n        }));\n        setResumeBuilderError({});\n      } else {\n        setResumeBuilderError(resumeFormValid.errors);\n        valid = false;\n      }\n    } else if (currentTab === 'preference') {\n      if (validatePreferences()) {\n        dispatch(savePreference({\n          url: `${config.baseUrl}`,\n          candidateId: login.candidateId,\n          userId: login.appUserId,\n          gotoNextTab\n        }));\n      } else {\n        valid = false;\n      }\n    }\n\n    return valid;\n  };\n\n  const gotoPrevious = () => {\n    window.scrollTo(0, 0);\n    dispatch(previousTab());\n  };\n\n  const navigateToTab = tabName => {\n    window.scrollTo(0, 0);\n    dispatch(gotoTab(tabName));\n  };\n\n  const previousDisabled = activeTab === 'personalInfo';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-main\",\n      children: [/*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-content app-content mt-0 main-background\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"side-app\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"main-container container-fluid\",\n            children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n              previous: \"Dashboard\",\n              current: \"Profile Builder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 29\n            }, this), activeTab !== 'summary' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card\",\n                  children: [!successStage && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card-header border-bottom-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"card-title\",\n                      children: \"Profile Builder\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 45\n                  }, this), error && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"toast wrap-input100 align-items-center text-white bg-danger border-0 show\",\n                      role: \"alert\",\n                      \"aria-live\": \"assertive\",\n                      \"aria-atomic\": \"true\",\n                      \"data-bs-autohide\": \"false\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"d-flex col-6\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"toast-body\",\n                          children: errorMessage || 'Save error! Please try again.'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 247,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 246,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: \"\\xA0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 252,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card-body\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      id: \"smartwizard-3\",\n                      className: \"sw-main sw-theme-dots\",\n                      children: [!successStage && /*#__PURE__*/_jsxDEV(\"ul\", {\n                        className: \"nav nav-tabs step-anchor\",\n                        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                          className: tabStyle('personalInfo'),\n                          children: /*#__PURE__*/_jsxDEV(\"a\", {\n                            className: 'nav-link',\n                            href: \"#\",\n                            onFocus: e => e.preventDefault(),\n                            onClick: event => {\n                              event.preventDefault();\n                              profileFlag && profileFlag.isPersonalInfoTabCompleted && navigateToTab('personalInfo');\n                            },\n                            children: \"Personal Info\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 259,\n                            columnNumber: 94\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 259,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                          className: tabStyle('resumeBuilder'),\n                          children: /*#__PURE__*/_jsxDEV(\"a\", {\n                            className: 'nav-link',\n                            href: \"#\",\n                            onFocus: e => e.preventDefault(),\n                            onClick: event => {\n                              event.preventDefault();\n                              profileFlag && profileFlag.isJobInfoCompleted && navigateToTab('resumeBuilder');\n                            },\n                            children: \"Resume Builder\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 263,\n                            columnNumber: 95\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 263,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                          className: tabStyle('preference'),\n                          children: /*#__PURE__*/_jsxDEV(\"a\", {\n                            className: 'nav-link',\n                            href: \"#\",\n                            onFocus: e => e.preventDefault(),\n                            onClick: event => {\n                              event.preventDefault();\n                              profileFlag && profileFlag.isJobInfoCompleted && navigateToTab('preference');\n                            },\n                            children: \"Preferences\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 267,\n                            columnNumber: 92\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 267,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 258,\n                        columnNumber: 69\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"tab-content sw-container\",\n                        children: [successStage && /*#__PURE__*/_jsxDEV(SaveSuccess, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 275,\n                          columnNumber: 73\n                        }, this), activeTab === 'personalInfo' && /*#__PURE__*/_jsxDEV(\"div\", {\n                          id: \"step-personalInfo\",\n                          children: /*#__PURE__*/_jsxDEV(PersonalInfo, {\n                            registrationErrors: registrationErrors,\n                            emergencyContactErrors: emergencyContactErrors,\n                            referencesErrors: referencesErrors\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 280,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 279,\n                          columnNumber: 57\n                        }, this), activeTab === 'resumeBuilder' && /*#__PURE__*/_jsxDEV(\"div\", {\n                          id: \"step-resumeBuilder\",\n                          children: /*#__PURE__*/_jsxDEV(ResumeBuilder, {\n                            resumeBuilderError: resumeBuilderError,\n                            educationErrors: educationErrors,\n                            workHistoryErrors: workHistoryErrors\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 286,\n                            columnNumber: 60\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 285,\n                          columnNumber: 57\n                        }, this), activeTab === 'preference' && /*#__PURE__*/_jsxDEV(\"div\", {\n                          id: \"step-preference\",\n                          children: /*#__PURE__*/_jsxDEV(Preference, {\n                            preferenceErrors: preferenceErrors\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 292,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 291,\n                          columnNumber: 57\n                        }, this), !successStage && /*#__PURE__*/_jsxDEV(_Fragment, {\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"btn-toolbar sw-toolbar sw-toolbar-bottom justify-content-end\",\n                            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"btn-group me-2 sw-btn-group\",\n                              role: \"group\",\n                              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                                className: \"btn btn-primary sw-btn-next\",\n                                type: \"button\",\n                                onClick: () => saveContinue(activeTab),\n                                children: \"Save and Continue\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 298,\n                                columnNumber: 61\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 297,\n                              columnNumber: 57\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"btn-group mr-2 sw-btn-group-extra\",\n                              role: \"group\",\n                              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                                className: \"btn btn-danger\",\n                                children: \"Cancel\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 301,\n                                columnNumber: 61\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 300,\n                              columnNumber: 57\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 296,\n                            columnNumber: 53\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"btn-toolbar sw-toolbar sw-toolbar-bottom justify-content-left\",\n                            children: /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"btn-group me-2 sw-btn-group prev-margin\",\n                              role: \"group\",\n                              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                                className: `btn btn-danger sw-btn-prev ${previousDisabled ? 'disabled' : ''}`,\n                                type: \"button\",\n                                onClick: gotoPrevious,\n                                children: \"Previous\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 306,\n                                columnNumber: 61\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 305,\n                              columnNumber: 57\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 304,\n                            columnNumber: 53\n                          }, this)]\n                        }, void 0, true)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 273,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 29\n            }, this), activeTab === 'summary' && /*#__PURE__*/_jsxDEV(Summary, {\n              registrationErrors: registrationErrors,\n              emergencyContactErrors: emergencyContactErrors,\n              referencesErrors: referencesErrors,\n              resumeBuilderError: resumeBuilderError,\n              educationErrors: educationErrors,\n              workHistoryErrors: workHistoryErrors,\n              preferenceErrors: preferenceErrors,\n              saveContinue: saveContinue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 60\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 222,\n    columnNumber: 9\n  }, this);\n}, \"Uuq/JPdQgwD7nHi8LifRS5J2e8s=\", false, function () {\n  return [useDispatch, useConfiguration, useSessionStorage, useValidation, useSelector, useSelector, useSelector, useSelector, useSelector];\n});","map":{"version":3,"sources":["D:/projects/Overture/DevOTWebUI/src/components/ProfileBuilder/index.js"],"names":["React","useEffect","useState","useDispatch","useSelector","useConfiguration","useSessionStorage","Header","Sidebar","Footer","PageHeader","PersonalInfo","getCurrentPersonalInfo","savePersonalInfo","resetErrorStatus","saveResumeBuilder","savePreference","Loader","profileBuilderSelector","personalInfoSelector","previousTab","gotoTab","ResumeBuilder","Preference","Summary","SaveSuccess","useValidation","validateResume","resumeBuilderSelector","preferenceSelector","loginSelector","registrationErrors","setRegistrationErrors","emergencyContactErrors","setEmergencyContactErrors","referencesErrors","setReferencesErrors","workHistoryErrors","setWorkHistoryErrors","educationErrors","setEducationErrors","resumeBuilderError","setResumeBuilderError","preferenceErrors","setPreferenceErrors","dispatch","config","storage","validate","activeTab","error","errorMessage","data","resumeForm","preferenceForm","profileFlag","login","getItem","successStage","document","title","baseUrl","url","userId","candidateId","tabStyle","tabName","validatePersonalInfo","keys","Object","registrationResult","map","key","name","valid","errors","validateEmergencyContact","emergencyContact","emergencyResult","validateReferences","validationResults","references","ref","index","anyFilled","some","every","result","validatePreferences","preferenceKeys","validationResult","validateNoResume","noResume","workHistoryValidationResult","workHistory","educationValidationResult","educationList","saveContinue","currentTab","gotoNextTab","window","scrollTo","appUserId","resumeFormValid","isValid","gotoPrevious","navigateToTab","previousDisabled","e","preventDefault","event","isPersonalInfoTabCompleted","isJobInfoCompleted"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,gBAAP,MAA8B,8BAA9B;AACA,OAAOC,iBAAP,MAA8B,+BAA9B;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAO,sBAAP;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,sBAAT,EAAiCC,gBAAjC,EAAmDC,gBAAnD,QAA2E,uBAA3E;AACA,SAASC,iBAAT,QAAkC,wBAAlC;AACA,SAAQC,cAAR,QAA6B,qBAA7B;AACA,OAAO,aAAP;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,SAAQC,sBAAR,QAAqC,YAArC;AACA,SAASC,oBAAT,QAAqC,yBAArC;AACA,SAASC,WAAT,EAAsBC,OAAtB,QAAqC,UAArC;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,OAAOC,aAAP,MAA0B,2BAA1B;AACA,SAASC,cAAT,QAA+B,wCAA/B;AACA,SAAQC,qBAAR,QAAoC,0BAApC;AACA,SAAQC,kBAAR,QAAiC,uBAAjC;AACA,SAAQC,aAAR,QAA4B,mBAA5B;;;AAEA,kBAAe,MAAM;AAAA;;AACjB,QAAM,CAACC,kBAAD,EAAqBC,qBAArB,IAA8C9B,QAAQ,CAAC,EAAD,CAA5D;AACA,QAAM,CAAC+B,sBAAD,EAAyBC,yBAAzB,IAAsDhC,QAAQ,CAAC,EAAD,CAApE;AACA,QAAM,CAACiC,gBAAD,EAAmBC,mBAAnB,IAA0ClC,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM,CAACmC,iBAAD,EAAoBC,oBAApB,IAA4CpC,QAAQ,CAAC,EAAD,CAA1D;AACA,QAAM,CAACqC,eAAD,EAAkBC,kBAAlB,IAAwCtC,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAACuC,kBAAD,EAAqBC,qBAArB,IAA8CxC,QAAQ,CAAC,EAAD,CAA5D;AACA,QAAM,CAACyC,gBAAD,EAAmBC,mBAAnB,IAA0C1C,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM2C,QAAQ,GAAG1C,WAAW,EAA5B;AACA,QAAM2C,MAAM,GAAGzC,gBAAgB,EAA/B;AACA,QAAM0C,OAAO,GAAGzC,iBAAiB,EAAjC;AACA,QAAM0C,QAAQ,GAAGtB,aAAa,EAA9B;AACA,QAAM;AAACuB,IAAAA,SAAD;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA;AAAnB,MAAmC/C,WAAW,CAACc,sBAAD,CAApD;AACA,QAAM;AAAEkC,IAAAA;AAAF,MAAWhD,WAAW,CAACe,oBAAD,CAA5B;AACA,QAAMkC,UAAU,GAAGjD,WAAW,CAACwB,qBAAD,CAA9B;AACA,QAAM0B,cAAc,GAAGlD,WAAW,CAACyB,kBAAD,CAAlC;AACA,QAAM;AAAE0B,IAAAA;AAAF,MAAkBnD,WAAW,CAAC0B,aAAD,CAAnC;AACA,QAAM0B,KAAK,GAAGT,OAAO,CAACU,OAAR,CAAgB,OAAhB,CAAd;AACA,QAAMC,YAAY,GAAGT,SAAS,KAAK,SAAnC;AACAhD,EAAAA,SAAS,CAAC,MAAM;AACZ0D,IAAAA,QAAQ,CAACC,KAAT,GAAiB,iBAAjB;AACH,GAFQ,EAEN,EAFM,CAAT;AAGA3D,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAG6C,MAAM,CAACe,OAAV,EAAmB;AACfhB,MAAAA,QAAQ,CAACjC,sBAAsB,CAAC;AAC5BkD,QAAAA,GAAG,EAAG,GAAEhB,MAAM,CAACe,OAAQ,6BADK;AACyBE,QAAAA,MAAM,EAAEP,KAAK,CAACQ;AADvC,OAAD,CAAvB,CAAR;AAGH;AACJ,GANQ,EAMN,CAAClB,MAAD,CANM,CAAT;;AAQA,QAAMmB,QAAQ,GAAIC,OAAD,IAAa;AAC1B,WAAOjB,SAAS,KAAKiB,OAAd,GAAwB,iBAAxB,GAA4C,UAAnD;AACH,GAFD;;AAGA,QAAMC,oBAAoB,GAAG,MAAM;AAC/B,UAAMC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYhB,IAAZ,CAAb;AACA,UAAMkB,kBAAkB,GAAGtB,QAAQ,CAAC,cAAD,EAAiBoB,IAAI,CAACG,GAAL,CAASC,GAAG,IAAI;AAChE,aAAO;AACHC,QAAAA,IAAI,EAAED,GADH;AACQpB,QAAAA,IAAI,EAAEA,IAAI,CAACoB,GAAD;AADlB,OAAP;AAGH,KAJmD,CAAjB,CAAnC;;AAKA,QAAGF,kBAAkB,CAACI,KAAtB,EAA4B;AACxB1C,MAAAA,qBAAqB,CAAC,EAAD,CAArB;AACH,KAFD,MAEO;AACHA,MAAAA,qBAAqB,CAACsC,kBAAkB,CAACK,MAApB,CAArB;AACH;;AACD,WAAOL,kBAAkB,CAACI,KAA1B;AACH,GAbD;;AAcA,QAAME,wBAAwB,GAAG,MAAM;AACnC,UAAMR,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYhB,IAAI,CAACyB,gBAAjB,CAAb;AACA,UAAMC,eAAe,GAAG9B,QAAQ,CAAC,kBAAD,EAAqBoB,IAAI,CAACG,GAAL,CAASC,GAAG,IAAI;AACjE,aAAO;AACHC,QAAAA,IAAI,EAAED,GADH;AACQpB,QAAAA,IAAI,EAAEA,IAAI,CAACyB,gBAAL,CAAsBL,GAAtB;AADd,OAAP;AAGH,KAJoD,CAArB,CAAhC;;AAKA,QAAGM,eAAe,CAACJ,KAAnB,EAAyB;AACrBxC,MAAAA,yBAAyB,CAAC,EAAD,CAAzB;AACH,KAFD,MAEO;AACHA,MAAAA,yBAAyB,CAAC4C,eAAe,CAACH,MAAjB,CAAzB;AACH;;AACD,WAAOG,eAAe,CAACJ,KAAvB;AACH,GAbD;;AAcA,QAAMK,kBAAkB,GAAG,MAAM;AAC7B,UAAMC,iBAAiB,GAAG5B,IAAI,CAAC6B,UAAL,CAAgBV,GAAhB,CAAoB,CAACW,GAAD,EAAMC,KAAN,KAAgB;AAC1D,YAAMf,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYc,GAAZ,CAAb;AACA,YAAME,SAAS,GAAGhB,IAAI,CAACiB,IAAL,CAAUb,GAAG,IAAIU,GAAG,CAACV,GAAD,CAApB,CAAlB,CAF0D,CAG1D;;AACI,UAAGY,SAAH,EAAc;AACd,eAAOpC,QAAQ,CAAC,YAAD,EAAeoB,IAAI,CAACG,GAAL,CAASC,GAAG,IAAI;AAC1C,iBAAO;AACHC,YAAAA,IAAI,EAAED,GADH;AACQpB,YAAAA,IAAI,EAAE8B,GAAG,CAACV,GAAD;AADjB,WAAP;AAGH,SAJ6B,CAAf,CAAf;AAKH,OANG,MAMG;AACH,eAAO;AAACE,UAAAA,KAAK,EAAE;AAAR,SAAP;AACH;AACJ,KAbyB,CAA1B;AAcA,UAAMA,KAAK,GAAGM,iBAAiB,CAACM,KAAlB,CAAwBC,MAAM,IAAIA,MAAM,CAACb,KAAzC,CAAd;;AACA,QAAGA,KAAH,EAAS;AACLtC,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;AACH,KAFD,MAEO;AACHA,MAAAA,mBAAmB,CAAC4C,iBAAiB,CAACT,GAAlB,CAAsBgB,MAAM,IAAIA,MAAM,CAACZ,MAAvC,CAAD,CAAnB;AACH;;AACD,WAAOD,KAAP;AACH,GAtBD;;AAwBA,QAAMc,mBAAmB,GAAG,MAAM;AAC9B,UAAMC,cAAc,GAAGpB,MAAM,CAACD,IAAP,CAAYd,cAAZ,CAAvB;AACA,UAAMoC,gBAAgB,GAAG1C,QAAQ,CAAC,aAAD,EAAgByC,cAAc,CAAClB,GAAf,CAAmBC,GAAG,IAAI;AACvE,aAAO;AACHC,QAAAA,IAAI,EAAED,GADH;AACQpB,QAAAA,IAAI,EAAEE,cAAc,CAACkB,GAAD;AAD5B,OAAP;AAGH,KAJgD,CAAhB,CAAjC;;AAKA,QAAGkB,gBAAgB,CAAChB,KAApB,EAA0B;AACtB9B,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;AACH,KAFD,MAEO;AACHA,MAAAA,mBAAmB,CAAC8C,gBAAgB,CAACf,MAAlB,CAAnB;AACH;;AACD,WAAOe,gBAAgB,CAAChB,KAAxB;AACH,GAbD;;AAeA,QAAMiB,gBAAgB,GAAG,MAAM;AAC3B,QAAGtC,UAAU,CAACD,IAAX,CAAgBwC,QAAnB,EAA6B;AACzB,YAAMC,2BAA2B,GAAGxC,UAAU,CAACyC,WAAX,CAAuBvB,GAAvB,CAA2B,CAACW,GAAD,EAAMC,KAAN,KAAgB;AAC3E,cAAMf,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYc,GAAZ,CAAb;AACA,cAAME,SAAS,GAAGhB,IAAI,CAACiB,IAAL,CAAUb,GAAG,IAAIU,GAAG,CAACV,GAAD,CAApB,CAAlB;;AACA,YAAGW,KAAK,KAAK,CAAV,IAAeC,SAAlB,EAA6B;AACzB,iBAAOpC,QAAQ,CAAC,aAAD,EAAgBoB,IAAI,CAACG,GAAL,CAASC,GAAG,IAAI;AAC3C,mBAAO;AACHC,cAAAA,IAAI,EAAED,GADH;AACQpB,cAAAA,IAAI,EAAE8B,GAAG,CAACV,GAAD;AADjB,aAAP;AAGH,WAJ8B,CAAhB,CAAf;AAKH,SAND,MAMO;AACH,iBAAO;AACHE,YAAAA,KAAK,EAAE;AADJ,WAAP;AAGH;AACJ,OAdmC,CAApC;AAeA,YAAMqB,yBAAyB,GAAG1C,UAAU,CAAC2C,aAAX,CAAyBzB,GAAzB,CAA6B,CAACW,GAAD,EAAMC,KAAN,KAAgB;AAC3E,cAAMf,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYc,GAAZ,CAAb;AACA,cAAME,SAAS,GAAGhB,IAAI,CAACiB,IAAL,CAAUb,GAAG,IAAIU,GAAG,CAACV,GAAD,CAApB,CAAlB;;AACA,YAAGW,KAAK,KAAK,CAAV,IAAeC,SAAlB,EAA6B;AACzB,iBAAOpC,QAAQ,CAAC,WAAD,EAAcoB,IAAI,CAACG,GAAL,CAASC,GAAG,IAAI;AACzC,mBAAO;AACHC,cAAAA,IAAI,EAAED,GADH;AACQpB,cAAAA,IAAI,EAAE8B,GAAG,CAACV,GAAD;AADjB,aAAP;AAGH,WAJ4B,CAAd,CAAf;AAKH,SAND,MAMO;AACH,iBAAO;AACHE,YAAAA,KAAK,EAAE;AADJ,WAAP;AAGH;AACJ,OAdiC,CAAlC;AAeA,YAAMA,KAAK,GAAGmB,2BAA2B,CAACP,KAA5B,CAAkCC,MAAM,IAAIA,MAAM,CAACb,KAAnD,KACVqB,yBAAyB,CAACT,KAA1B,CAAgCC,MAAM,IAAIA,MAAM,CAACb,KAAjD,CADJ;;AAEA,UAAIA,KAAJ,EAAW;AACPlC,QAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACAF,QAAAA,oBAAoB,CAAC,EAAD,CAApB;AACH,OAHD,MAGO;AACHE,QAAAA,kBAAkB,CAACuD,yBAAyB,CAACxB,GAA1B,CAA8BgB,MAAM,IAAIA,MAAM,CAACZ,MAA/C,CAAD,CAAlB;AACArC,QAAAA,oBAAoB,CAACuD,2BAA2B,CAACtB,GAA5B,CAAgCgB,MAAM,IAAIA,MAAM,CAACZ,MAAjD,CAAD,CAApB;AACH;;AACD,aAAOD,KAAP;AACH,KAzCD,MAyCO;AACH,aAAO,IAAP;AACH;AACJ,GA7CD;;AA8CA,QAAMuB,YAAY,GAAG,UAACC,UAAD,EAAkC;AAAA,QAArBC,WAAqB,uEAAT,IAAS;AACnDC,IAAAA,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACAxD,IAAAA,QAAQ,CAAC/B,gBAAgB,EAAjB,CAAR;AACA,QAAI4D,KAAK,GAAG,IAAZ;;AACA,QAAGwB,UAAU,KAAK,cAAlB,EAAkC;AAC9B,UAAG/B,oBAAoB,MAAMS,wBAAwB,EAAlD,IAAwDG,kBAAkB,EAA7E,EAAiF;AAC7ElC,QAAAA,QAAQ,CAAChC,gBAAgB,CAAC;AACtBiD,UAAAA,GAAG,EAAG,GAAEhB,MAAM,CAACe,OAAQ,+BADD;AACiCG,UAAAA,WAAW,EAAER,KAAK,CAACQ,WADpD;AACiED,UAAAA,MAAM,EAAEP,KAAK,CAAC8C,SAD/E;AAC0FH,UAAAA;AAD1F,SAAD,CAAjB,CAAR;AAGH,OAJD,MAIO;AACHzB,QAAAA,KAAK,GAAG,KAAR;AACH;AACJ,KARD,MAQO,IAAGwB,UAAU,KAAK,eAAlB,EAAmC;AACtC,YAAMK,eAAe,GAAG5E,cAAc,CAAC0B,UAAD,CAAtC;;AACA,UAAGsC,gBAAgB,MAAMY,eAAe,CAACC,OAAzC,EAAkD;AAC9C3D,QAAAA,QAAQ,CAAC9B,iBAAiB,CAAC;AACvB+C,UAAAA,GAAG,EAAG,GAAEhB,MAAM,CAACe,OAAQ,EADA;AACGG,UAAAA,WAAW,EAAER,KAAK,CAACQ,WADtB;AACmCD,UAAAA,MAAM,EAAEP,KAAK,CAAC8C,SADjD;AAC4DH,UAAAA;AAD5D,SAAD,CAAlB,CAAR;AAGAzD,QAAAA,qBAAqB,CAAC,EAAD,CAArB;AACH,OALD,MAKO;AACHA,QAAAA,qBAAqB,CAAC6D,eAAe,CAAC5B,MAAjB,CAArB;AACAD,QAAAA,KAAK,GAAG,KAAR;AACH;AACJ,KAXM,MAWA,IAAGwB,UAAU,KAAK,YAAlB,EAAgC;AACnC,UAAGV,mBAAmB,EAAtB,EAA0B;AACtB3C,QAAAA,QAAQ,CAAC7B,cAAc,CAAC;AACpB8C,UAAAA,GAAG,EAAG,GAAEhB,MAAM,CAACe,OAAQ,EADH;AACMG,UAAAA,WAAW,EAAER,KAAK,CAACQ,WADzB;AACsCD,UAAAA,MAAM,EAAEP,KAAK,CAAC8C,SADpD;AAC+DH,UAAAA;AAD/D,SAAD,CAAf,CAAR;AAGH,OAJD,MAIM;AACFzB,QAAAA,KAAK,GAAG,KAAR;AACH;AACJ;;AACD,WAAOA,KAAP;AACH,GAjCD;;AAmCA,QAAM+B,YAAY,GAAG,MAAM;AACvBL,IAAAA,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACAxD,IAAAA,QAAQ,CAACzB,WAAW,EAAZ,CAAR;AACH,GAHD;;AAKA,QAAMsF,aAAa,GAAIxC,OAAD,IAAa;AAC/BkC,IAAAA,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACAxD,IAAAA,QAAQ,CAACxB,OAAO,CAAC6C,OAAD,CAAR,CAAR;AACH,GAHD;;AAKA,QAAMyC,gBAAgB,GAAG1D,SAAS,KAAK,cAAvC;AACA,sBACI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,8BACI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,cAHJ,eAII;AAAK,QAAA,SAAS,EAAE,+CAAhB;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,iCACI;AAAK,YAAA,SAAS,EAAC,gCAAf;AAAA,oCACI,QAAC,UAAD;AAAY,cAAA,QAAQ,EAAE,WAAtB;AAAmC,cAAA,OAAO,EAAE;AAA5C;AAAA;AAAA;AAAA;AAAA,oBADJ,EAGQA,SAAS,KAAK,SAAd,iBACJ;AAAK,cAAA,SAAS,EAAC,KAAf;AAAA,qCACI;AAAK,gBAAA,SAAS,EAAC,QAAf;AAAA,uCACI;AAAK,kBAAA,SAAS,EAAC,MAAf;AAAA,6BAEQ,CAACS,YAAD,iBACA;AAAK,oBAAA,SAAS,EAAC,6BAAf;AAAA,2CACI;AAAI,sBAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,0BAHR,EAQQR,KAAK,iBACL;AAAA,4CACI;AAAK,sBAAA,SAAS,EAAC,2EAAf;AAA2F,sBAAA,IAAI,EAAC,OAAhG;AAAwG,mCAAU,WAAlH;AAA8H,qCAAY,MAA1I;AAAiJ,0CAAiB,OAAlK;AAAA,6CACI;AAAK,wBAAA,SAAS,EAAC,cAAf;AAAA,+CACI;AAAK,0BAAA,SAAS,EAAC,YAAf;AAAA,oCACKC,YAAY,IAAI;AADrB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,4BADJ,eAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BARJ;AAAA,kCATR,eAoBI;AAAK,oBAAA,SAAS,EAAC,WAAf;AAAA,2CACI;AAAK,sBAAA,EAAE,EAAC,eAAR;AAAwB,sBAAA,SAAS,EAAE,uBAAnC;AAAA,iCAEO,CAACO,YAAD,iBAAiB;AAAI,wBAAA,SAAS,EAAE,0BAAf;AAAA,gDAChB;AAAI,0BAAA,SAAS,EAAEO,QAAQ,CAAC,cAAD,CAAvB;AAAA,iDAAyC;AAAG,4BAAA,SAAS,EAAE,UAAd;AAA0B,4BAAA,IAAI,EAAC,GAA/B;AAAmC,4BAAA,OAAO,EAAG2C,CAAD,IAAOA,CAAC,CAACC,cAAF,EAAnD;AAAuE,4BAAA,OAAO,EAAGC,KAAD,IAAU;AAC/HA,8BAAAA,KAAK,CAACD,cAAN;AACAtD,8BAAAA,WAAW,IAAIA,WAAW,CAACwD,0BAA3B,IAAyDL,aAAa,CAAC,cAAD,CAAtE;AACH,6BAHwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzC;AAAA;AAAA;AAAA;AAAA,gCADgB,eAKhB;AAAI,0BAAA,SAAS,EAAEzC,QAAQ,CAAC,eAAD,CAAvB;AAAA,iDAA0C;AAAG,4BAAA,SAAS,EAAE,UAAd;AAA0B,4BAAA,IAAI,EAAC,GAA/B;AAAmC,4BAAA,OAAO,EAAG2C,CAAD,IAAMA,CAAC,CAACC,cAAF,EAAlD;AAAsE,4BAAA,OAAO,EAAEC,KAAK,IAAI;AAC7HA,8BAAAA,KAAK,CAACD,cAAN;AACDtD,8BAAAA,WAAW,IAAIA,WAAW,CAACyD,kBAA3B,IAAiDN,aAAa,CAAC,eAAD,CAA9D;AACH,6BAHyC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA1C;AAAA;AAAA;AAAA;AAAA,gCALgB,eAShB;AAAI,0BAAA,SAAS,EAAEzC,QAAQ,CAAC,YAAD,CAAvB;AAAA,iDAAuC;AAAG,4BAAA,SAAS,EAAE,UAAd;AAA0B,4BAAA,IAAI,EAAC,GAA/B;AAAmC,4BAAA,OAAO,EAAE2C,CAAC,IAAIA,CAAC,CAACC,cAAF,EAAjD;AAAqE,4BAAA,OAAO,EAAGC,KAAD,IAAW;AAC5HA,8BAAAA,KAAK,CAACD,cAAN;AACAtD,8BAAAA,WAAW,IAAIA,WAAW,CAACyD,kBAA3B,IAAiDN,aAAa,CAAC,YAAD,CAA9D;AACH,6BAHsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAvC;AAAA;AAAA;AAAA;AAAA,gCATgB;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFxB,eAiBI;AAAK,wBAAA,SAAS,EAAE,0BAAhB;AAAA,mCAEQhD,YAAY,iBAAI,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,gCAFxB,EAKQT,SAAS,KAAK,cAAd,iBACA;AAAK,0BAAA,EAAE,EAAE,mBAAT;AAAA,iDACI,QAAC,YAAD;AAAc,4BAAA,kBAAkB,EAAElB,kBAAlC;AAAsD,4BAAA,sBAAsB,EAAEE,sBAA9E;AAAsG,4BAAA,gBAAgB,EAAEE;AAAxH;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gCANR,EAWQc,SAAS,KAAK,eAAd,iBACA;AAAK,0BAAA,EAAE,EAAE,oBAAT;AAAA,iDACG,QAAC,aAAD;AAAe,4BAAA,kBAAkB,EAAER,kBAAnC;AAAuD,4BAAA,eAAe,EAAEF,eAAxE;AAAyF,4BAAA,iBAAiB,EAAEF;AAA5G;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA,gCAZR,EAiBQY,SAAS,KAAK,YAAd,iBACA;AAAK,0BAAA,EAAE,EAAE,iBAAT;AAAA,iDACI,QAAC,UAAD;AAAY,4BAAA,gBAAgB,EAAEN;AAA9B;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gCAlBR,EAsBM,CAACe,YAAD,iBAAiB;AAAA,kDACnB;AAAK,4BAAA,SAAS,EAAC,8DAAf;AAAA,oDACI;AAAK,8BAAA,SAAS,EAAC,6BAAf;AAA6C,8BAAA,IAAI,EAAC,OAAlD;AAAA,qDACI;AAAQ,gCAAA,SAAS,EAAC,6BAAlB;AAAgD,gCAAA,IAAI,EAAC,QAArD;AAA8D,gCAAA,OAAO,EAAE,MAAMuC,YAAY,CAAChD,SAAD,CAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oCADJ,eAII;AAAK,8BAAA,SAAS,EAAC,mCAAf;AAAmD,8BAAA,IAAI,EAAC,OAAxD;AAAA,qDACI;AAAQ,gCAAA,SAAS,EAAC,gBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oCAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kCADmB,eASnB;AAAK,4BAAA,SAAS,EAAC,+DAAf;AAAA,mDACI;AAAK,8BAAA,SAAS,EAAC,yCAAf;AAAyD,8BAAA,IAAI,EAAC,OAA9D;AAAA,qDACI;AAAQ,gCAAA,SAAS,EAAG,8BAA6B0D,gBAAgB,GAAE,UAAF,GAAc,EAAG,EAAlF;AAAqF,gCAAA,IAAI,EAAC,QAA1F;AAAmG,gCAAA,OAAO,EAAEF,YAA5G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kCATmB;AAAA,wCAtBvB;AAAA;AAAA;AAAA;AAAA;AAAA,8BAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,0BApBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAJJ,EAyFQxD,SAAS,KAAK,SAAd,iBAA2B,QAAC,OAAD;AAAS,cAAA,kBAAkB,EAAElB,kBAA7B;AACS,cAAA,sBAAsB,EAAEE,sBADjC;AACyD,cAAA,gBAAgB,EAAEE,gBAD3E;AAES,cAAA,kBAAkB,EAAEM,kBAF7B;AAEiD,cAAA,eAAe,EAAEF,eAFlE;AAGS,cAAA,iBAAiB,EAAEF,iBAH5B;AAG+C,cAAA,gBAAgB,EAAEM,gBAHjE;AAGmF,cAAA,YAAY,EAAEsD;AAHjG;AAAA;AAAA;AAAA;AAAA,oBAzFnC;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAyGI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YAzGJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA6GH,CA7SD;AAAA,UAQqB9F,WARrB,EASmBE,gBATnB,EAUoBC,iBAVpB,EAWqBoB,aAXrB,EAY6CtB,WAZ7C,EAaqBA,WAbrB,EAcuBA,WAdvB,EAe2BA,WAf3B,EAgB4BA,WAhB5B;AAAA","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport useConfiguration  from '../../hooks/useConfiguration';\nimport useSessionStorage from \"../../hooks/useSessionStorage\";\nimport Header from \"../common/Header\";\nimport Sidebar from \"../common/Sidebar\";\nimport Footer from \"../common/Footer\";\nimport PageHeader from \"./pageHeader\";\nimport './profilebuilder.css';\nimport PersonalInfo from \"./PersonalInfo\";\nimport { getCurrentPersonalInfo, savePersonalInfo, resetErrorStatus } from './PersonalInfo/action';\nimport { saveResumeBuilder } from \"./ResumeBuilder/action\";\nimport {savePreference} from \"./Preference/action\";\nimport './index.css';\nimport Loader from \"../common/Loader\";\nimport {profileBuilderSelector} from './selector';\nimport { personalInfoSelector } from \"./PersonalInfo/selector\";\nimport { previousTab, gotoTab } from \"./action\";\nimport ResumeBuilder from \"./ResumeBuilder\";\nimport Preference from \"./Preference\";\nimport Summary from \"../Summary\";\nimport SaveSuccess from \"../SaveSuccess\";\nimport useValidation from \"../../hooks/useValidation\";\nimport { validateResume } from './ResumeBuilder/customResumeValidation';\nimport {resumeBuilderSelector} from \"./ResumeBuilder/selector\";\nimport {preferenceSelector} from \"./Preference/selector\";\nimport {loginSelector} from \"../Login/selector\";\n\nexport default () => {\n    const [registrationErrors, setRegistrationErrors] = useState({});\n    const [emergencyContactErrors, setEmergencyContactErrors] = useState({});\n    const [referencesErrors, setReferencesErrors] = useState([]);\n    const [workHistoryErrors, setWorkHistoryErrors] = useState([]);\n    const [educationErrors, setEducationErrors] = useState([]);\n    const [resumeBuilderError, setResumeBuilderError] = useState({});\n    const [preferenceErrors, setPreferenceErrors] = useState({});\n    const dispatch = useDispatch();\n    const config = useConfiguration();\n    const storage = useSessionStorage();\n    const validate = useValidation();\n    const {activeTab, error, errorMessage} = useSelector(profileBuilderSelector);\n    const { data } = useSelector(personalInfoSelector);\n    const resumeForm = useSelector(resumeBuilderSelector);\n    const preferenceForm = useSelector(preferenceSelector);\n    const { profileFlag } = useSelector(loginSelector);\n    const login = storage.getItem(\"login\");\n    const successStage = activeTab === 'success';\n    useEffect(() => {\n        document.title = \"Profile Builder\";\n    }, []);\n    useEffect(() => {\n        if(config.baseUrl) {\n            dispatch(getCurrentPersonalInfo({\n                url: `${config.baseUrl}/Candidates/getpersonalinfo`, userId: login.candidateId\n            }));\n        }\n    }, [config]);\n\n    const tabStyle = (tabName) => {\n        return activeTab === tabName ? 'nav-item active' : 'nav-item';\n    };\n    const validatePersonalInfo = () => {\n        const keys = Object.keys(data);\n        const registrationResult = validate(\"personalInfo\", keys.map(key => {\n            return {\n                name: key, data: data[key]\n            }\n        }));\n        if(registrationResult.valid){\n            setRegistrationErrors({});\n        } else {\n            setRegistrationErrors(registrationResult.errors);\n        }\n        return registrationResult.valid;\n    }\n    const validateEmergencyContact = () => {\n        const keys = Object.keys(data.emergencyContact);\n        const emergencyResult = validate(\"emergencyContact\", keys.map(key => {\n            return {\n                name: key, data: data.emergencyContact[key]\n            }\n        }));\n        if(emergencyResult.valid){\n            setEmergencyContactErrors({});\n        } else {\n            setEmergencyContactErrors(emergencyResult.errors);\n        }\n        return emergencyResult.valid;\n    }\n    const validateReferences = () => {\n        const validationResults = data.references.map((ref, index) => {\n            const keys = Object.keys(ref);\n            const anyFilled = keys.some(key => ref[key]);\n            //if(index === 0 || anyFilled) {\n                if(anyFilled) {\n                return validate(\"references\", keys.map(key => {\n                    return {\n                        name: key, data: ref[key]\n                    }\n                }));\n            } else {\n                return {valid: true};\n            }\n        });\n        const valid = validationResults.every(result => result.valid);\n        if(valid){\n            setReferencesErrors([]);\n        } else {\n            setReferencesErrors(validationResults.map(result => result.errors));\n        }\n        return valid\n    }\n\n    const validatePreferences = () => {\n        const preferenceKeys = Object.keys(preferenceForm);\n        const validationResult = validate(\"preferences\", preferenceKeys.map(key => {\n            return {\n                name: key, data: preferenceForm[key]\n            }\n        }));\n        if(validationResult.valid){\n            setPreferenceErrors({});\n        } else {\n            setPreferenceErrors(validationResult.errors);\n        }\n        return validationResult.valid;\n    }\n\n    const validateNoResume = () => {\n        if(resumeForm.data.noResume) {\n            const workHistoryValidationResult = resumeForm.workHistory.map((ref, index) => {\n                const keys = Object.keys(ref);\n                const anyFilled = keys.some(key => ref[key]);\n                if(index === 0 || anyFilled) {\n                    return validate(\"workHistory\", keys.map(key => {\n                        return {\n                            name: key, data: ref[key]\n                        }\n                    }));\n                } else {\n                    return {\n                        valid: true\n                    }\n                }\n            });\n            const educationValidationResult = resumeForm.educationList.map((ref, index) => {\n                const keys = Object.keys(ref);\n                const anyFilled = keys.some(key => ref[key]);\n                if(index === 0 || anyFilled) {\n                    return validate(\"education\", keys.map(key => {\n                        return {\n                            name: key, data: ref[key]\n                        }\n                    }));\n                } else {\n                    return {\n                        valid: true\n                    }\n                }\n            });\n            const valid = workHistoryValidationResult.every(result => result.valid) &&\n                educationValidationResult.every(result => result.valid);\n            if (valid) {\n                setEducationErrors([]);\n                setWorkHistoryErrors([]);\n            } else {\n                setEducationErrors(educationValidationResult.map(result => result.errors));\n                setWorkHistoryErrors(workHistoryValidationResult.map(result => result.errors));\n            }\n            return valid;\n        } else {\n            return true;\n        }\n    }\n    const saveContinue = (currentTab, gotoNextTab=true) => {\n        window.scrollTo(0, 0)\n        dispatch(resetErrorStatus())\n        let valid = true;\n        if(currentTab === 'personalInfo') {\n            if(validatePersonalInfo() && validateEmergencyContact() && validateReferences()) {\n                dispatch(savePersonalInfo({\n                    url: `${config.baseUrl}/Candidates/savepersonalinfo/`, candidateId: login.candidateId, userId: login.appUserId, gotoNextTab\n                }));\n            } else {\n                valid = false;\n            }\n        } else if(currentTab === 'resumeBuilder') {\n            const resumeFormValid = validateResume(resumeForm);\n            if(validateNoResume() && resumeFormValid.isValid) {\n                dispatch(saveResumeBuilder({\n                    url: `${config.baseUrl}`, candidateId: login.candidateId, userId: login.appUserId, gotoNextTab\n                }));\n                setResumeBuilderError({});\n            } else {\n                setResumeBuilderError(resumeFormValid.errors);\n                valid = false;\n            }\n        } else if(currentTab === 'preference') {\n            if(validatePreferences()) {\n                dispatch(savePreference({\n                    url: `${config.baseUrl}`, candidateId: login.candidateId, userId: login.appUserId, gotoNextTab\n                }));\n            }else {\n                valid = false;\n            }\n        }\n        return valid;\n    };\n\n    const gotoPrevious = () => {\n        window.scrollTo(0, 0)\n        dispatch(previousTab());\n    };\n\n    const navigateToTab = (tabName) => {\n        window.scrollTo(0, 0)\n        dispatch(gotoTab(tabName));\n    }\n    \n    const previousDisabled = activeTab === 'personalInfo';\n    return (\n        <div className=\"page\">\n            <div className=\"page-main\">\n                <Loader />\n                <Header />\n                <Sidebar />\n                <div className={\"main-content app-content mt-0 main-background\"}>\n                    <div className=\"side-app\">\n                        <div className=\"main-container container-fluid\">\n                            <PageHeader previous={\"Dashboard\"} current={\"Profile Builder\"}/>\n                            {\n                                activeTab !== 'summary' &&\n                            <div className=\"row\">\n                                <div className=\"col-12\">\n                                    <div className=\"card\">\n                                        {\n                                            !successStage &&\n                                            <div className=\"card-header border-bottom-0\">\n                                                <h3 className=\"card-title\">Profile Builder</h3>\n                                            </div>\n                                        }\n                                        {\n                                            error &&\n                                            <>\n                                                <div className=\"toast wrap-input100 align-items-center text-white bg-danger border-0 show\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-autohide=\"false\">\n                                                    <div className=\"d-flex col-6\">\n                                                        <div className=\"toast-body\">\n                                                            {errorMessage || 'Save error! Please try again.'}\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div>&nbsp;</div>\n                                            </>\n                                        }\n                                        <div className=\"card-body\">\n                                            <div id=\"smartwizard-3\" className={\"sw-main sw-theme-dots\"}>\n                                                {\n                                                   !successStage && <ul className={\"nav nav-tabs step-anchor\"}>\n                                                    <li className={tabStyle('personalInfo')}><a className={'nav-link'} href=\"#\" onFocus={(e) => e.preventDefault()} onClick={(event)=> {\n                                                        event.preventDefault();\n                                                        profileFlag && profileFlag.isPersonalInfoTabCompleted && navigateToTab('personalInfo');\n                                                    }}>Personal Info</a></li>\n                                                    <li className={tabStyle('resumeBuilder')}><a className={'nav-link'} href=\"#\" onFocus={(e)=> e.preventDefault()} onClick={event => {\n                                                         event.preventDefault();\n                                                        profileFlag && profileFlag.isJobInfoCompleted && navigateToTab('resumeBuilder');\n                                                    }}>Resume Builder</a></li>\n                                                    <li className={tabStyle('preference')}><a className={'nav-link'} href=\"#\" onFocus={e => e.preventDefault()} onClick={(event) => {\n                                                        event.preventDefault();\n                                                        profileFlag && profileFlag.isJobInfoCompleted && navigateToTab('preference');\n                                                    }}>Preferences</a></li>\n                                                    </ul>\n                                                }\n                                                <div className={\"tab-content sw-container\"}>\n                                                    {\n                                                        successStage && <SaveSuccess />\n                                                    }\n                                                    {\n                                                        activeTab === 'personalInfo' &&\n                                                        <div id={\"step-personalInfo\"}>\n                                                            <PersonalInfo registrationErrors={registrationErrors} emergencyContactErrors={emergencyContactErrors} referencesErrors={referencesErrors}/>\n                                                        </div>\n                                                    }\n                                                    {\n                                                        activeTab === 'resumeBuilder' &&\n                                                        <div id={\"step-resumeBuilder\"}>\n                                                           <ResumeBuilder resumeBuilderError={resumeBuilderError} educationErrors={educationErrors} workHistoryErrors={workHistoryErrors}/>\n                                                        </div>\n                                                    }\n                                                    {\n                                                        activeTab === 'preference' &&\n                                                        <div id={\"step-preference\"}>\n                                                            <Preference preferenceErrors={preferenceErrors}/>\n                                                        </div>\n                                                    }\n                                                    { !successStage && <>\n                                                    <div className=\"btn-toolbar sw-toolbar sw-toolbar-bottom justify-content-end\">\n                                                        <div className=\"btn-group me-2 sw-btn-group\" role=\"group\">\n                                                            <button className=\"btn btn-primary sw-btn-next\" type=\"button\" onClick={() => saveContinue(activeTab)}>Save and Continue</button>\n                                                        </div>\n                                                        <div className=\"btn-group mr-2 sw-btn-group-extra\" role=\"group\">\n                                                            <button className=\"btn btn-danger\">Cancel</button>\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"btn-toolbar sw-toolbar sw-toolbar-bottom justify-content-left\">\n                                                        <div className=\"btn-group me-2 sw-btn-group prev-margin\" role=\"group\">\n                                                            <button className={`btn btn-danger sw-btn-prev ${previousDisabled? 'disabled': ''}`} type=\"button\" onClick={gotoPrevious}>Previous</button>\n                                                        </div>\n                                                    </div>\n                                                    </>}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            }\n                            {\n                                activeTab === 'summary' && <Summary registrationErrors={registrationErrors}\n                                                                    emergencyContactErrors={emergencyContactErrors} referencesErrors={referencesErrors}\n                                                                    resumeBuilderError={resumeBuilderError} educationErrors={educationErrors}\n                                                                    workHistoryErrors={workHistoryErrors} preferenceErrors={preferenceErrors} saveContinue={saveContinue}/>\n                            }\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <Footer />\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}