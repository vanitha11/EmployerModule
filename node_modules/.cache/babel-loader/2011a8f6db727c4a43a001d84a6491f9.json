{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport useConfiguration from \"./useConfiguration\";\n\nfunction useValidation() {\n  _s();\n\n  const config = useConfiguration();\n\n  function validate(formName, values) {\n    const validationResult = {\n      valid: true,\n      errors: {}\n    };\n\n    const isEmpty = value => {\n      return value === undefined || value === null || (value.trim && value.trim()) === '';\n    };\n\n    if (!config.validations) {\n      return validationResult;\n    }\n\n    const validationConfig = config.validations[formName];\n    values.map(value => {\n      const validationObj = validationConfig[value.name] || {};\n      validationResult.errors[value.name] = [];\n\n      if (validationObj.required && (isEmpty(value.data) || value.data.length === 0)) {\n        validationResult.errors[value.name].push(\"This field is required\");\n        validationResult.valid = false;\n      }\n\n      if (validationObj.min && value.data && value.data.length < validationObj.min) {\n        validationResult.errors[value.name].push(`At least ${validationObj.min} characters long`);\n        validationResult.valid = false;\n      }\n\n      if (validationObj.max && value.data && value.data.length > validationObj.max) {\n        validationResult.errors[value.name].push(`At most ${validationObj.max} characters long`);\n        validationResult.valid = false;\n      }\n\n      if (validationObj.pattern && value.data) {\n        const regex = new RegExp(validationObj.pattern);\n\n        if (!regex.test(value.data)) {\n          validationResult.errors[value.name].push(`This field has invalid pattern`);\n          validationResult.valid = false;\n        }\n      }\n    });\n    return validationResult;\n  }\n\n  return validate;\n}\n\n_s(useValidation, \"FH0EXNHWozJ2PEsmh9b8wzq3svM=\", false, function () {\n  return [useConfiguration];\n});\n\nexport default useValidation;","map":{"version":3,"sources":["D:/projects/Overture/DevOTWebUI/src/hooks/useValidation.js"],"names":["useConfiguration","useValidation","config","validate","formName","values","validationResult","valid","errors","isEmpty","value","undefined","trim","validations","validationConfig","map","validationObj","name","required","data","length","push","min","max","pattern","regex","RegExp","test"],"mappings":";;AAAA,OAAOA,gBAAP,MAA6B,oBAA7B;;AAEA,SAASC,aAAT,GAAyB;AAAA;;AACrB,QAAMC,MAAM,GAAGF,gBAAgB,EAA/B;;AACA,WAASG,QAAT,CAAkBC,QAAlB,EAA4BC,MAA5B,EAAoC;AAEhC,UAAMC,gBAAgB,GAAG;AACrBC,MAAAA,KAAK,EAAE,IADc;AAErBC,MAAAA,MAAM,EAAE;AAFa,KAAzB;;AAIA,UAAMC,OAAO,GAAIC,KAAD,IAAW;AACvB,aAAOA,KAAK,KAAKC,SAAV,IAAuBD,KAAK,KAAK,IAAjC,IAAyC,CAACA,KAAK,CAACE,IAAN,IAAcF,KAAK,CAACE,IAAN,EAAf,MAAiC,EAAjF;AACH,KAFD;;AAGA,QAAG,CAACV,MAAM,CAACW,WAAX,EAAuB;AACnB,aAAOP,gBAAP;AACH;;AACD,UAAMQ,gBAAgB,GAAGZ,MAAM,CAACW,WAAP,CAAmBT,QAAnB,CAAzB;AACAC,IAAAA,MAAM,CAACU,GAAP,CAAWL,KAAK,IAAI;AAChB,YAAMM,aAAa,GAAGF,gBAAgB,CAACJ,KAAK,CAACO,IAAP,CAAhB,IAAgC,EAAtD;AACAX,MAAAA,gBAAgB,CAACE,MAAjB,CAAwBE,KAAK,CAACO,IAA9B,IAAsC,EAAtC;;AACA,UAAID,aAAa,CAACE,QAAd,KAA2BT,OAAO,CAACC,KAAK,CAACS,IAAP,CAAP,IAAuBT,KAAK,CAACS,IAAN,CAAWC,MAAX,KAAsB,CAAxE,CAAJ,EAAgF;AAC5Ed,QAAAA,gBAAgB,CAACE,MAAjB,CAAwBE,KAAK,CAACO,IAA9B,EAAoCI,IAApC,CAAyC,wBAAzC;AACAf,QAAAA,gBAAgB,CAACC,KAAjB,GAAyB,KAAzB;AACH;;AACD,UAAIS,aAAa,CAACM,GAAd,IAAqBZ,KAAK,CAACS,IAA3B,IAAmCT,KAAK,CAACS,IAAN,CAAWC,MAAX,GAAoBJ,aAAa,CAACM,GAAzE,EAA8E;AAC1EhB,QAAAA,gBAAgB,CAACE,MAAjB,CAAwBE,KAAK,CAACO,IAA9B,EAAoCI,IAApC,CAA0C,YAAWL,aAAa,CAACM,GAAI,kBAAvE;AACAhB,QAAAA,gBAAgB,CAACC,KAAjB,GAAyB,KAAzB;AACH;;AACD,UAAIS,aAAa,CAACO,GAAd,IAAqBb,KAAK,CAACS,IAA3B,IAAmCT,KAAK,CAACS,IAAN,CAAWC,MAAX,GAAoBJ,aAAa,CAACO,GAAzE,EAA8E;AAC1EjB,QAAAA,gBAAgB,CAACE,MAAjB,CAAwBE,KAAK,CAACO,IAA9B,EAAoCI,IAApC,CAA0C,WAAUL,aAAa,CAACO,GAAI,kBAAtE;AACAjB,QAAAA,gBAAgB,CAACC,KAAjB,GAAyB,KAAzB;AACH;;AACD,UAAIS,aAAa,CAACQ,OAAd,IAAyBd,KAAK,CAACS,IAAnC,EAAyC;AACrC,cAAMM,KAAK,GAAG,IAAIC,MAAJ,CAAWV,aAAa,CAACQ,OAAzB,CAAd;;AACA,YAAI,CAACC,KAAK,CAACE,IAAN,CAAWjB,KAAK,CAACS,IAAjB,CAAL,EAA6B;AACzBb,UAAAA,gBAAgB,CAACE,MAAjB,CAAwBE,KAAK,CAACO,IAA9B,EAAoCI,IAApC,CAA0C,gCAA1C;AACAf,UAAAA,gBAAgB,CAACC,KAAjB,GAAyB,KAAzB;AACH;AACJ;AACJ,KAtBD;AAuBA,WAAOD,gBAAP;AACH;;AACD,SAAOH,QAAP;AACH;;GAzCQF,a;UACUD,gB;;;AAyCnB,eAAeC,aAAf","sourcesContent":["import useConfiguration from \"./useConfiguration\";\n\nfunction useValidation() {\n    const config = useConfiguration();\n    function validate(formName, values) {\n\n        const validationResult = {\n            valid: true,\n            errors: {}\n        };\n        const isEmpty = (value) => {\n            return value === undefined || value === null || (value.trim && value.trim()) === '';\n        };\n        if(!config.validations){\n            return validationResult;\n        }\n        const validationConfig = config.validations[formName];\n        values.map(value => {\n            const validationObj = validationConfig[value.name] || {};\n            validationResult.errors[value.name] = [];\n            if (validationObj.required && (isEmpty(value.data) || value.data.length === 0)) {\n                validationResult.errors[value.name].push(\"This field is required\");\n                validationResult.valid = false;\n            }\n            if (validationObj.min && value.data && value.data.length < validationObj.min) {\n                validationResult.errors[value.name].push(`At least ${validationObj.min} characters long`);\n                validationResult.valid = false;\n            }\n            if (validationObj.max && value.data && value.data.length > validationObj.max) {\n                validationResult.errors[value.name].push(`At most ${validationObj.max} characters long`);\n                validationResult.valid = false;\n            }\n            if (validationObj.pattern && value.data) {\n                const regex = new RegExp(validationObj.pattern);\n                if (!regex.test(value.data)) {\n                    validationResult.errors[value.name].push(`This field has invalid pattern`);\n                    validationResult.valid = false;\n                }\n            }\n        });\n        return validationResult;\n    }\n    return validate;\n}\nexport default useValidation;\n"]},"metadata":{},"sourceType":"module"}