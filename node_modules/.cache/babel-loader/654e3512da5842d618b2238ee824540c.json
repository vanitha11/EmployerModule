{"ast":null,"code":"import _objectSpread from\"D:/projects/Overture/DevOTWebUI/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/projects/Overture/DevOTWebUI/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Loader from\"../common/Loader\";import Header from\"../common/Header\";import Sidebar from\"../common/Sidebar\";import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{logOut}from\"../Login/action\";import PageHeader from\"../ProfileBuilder/pageHeader\";import Registration from\"../Summary/registration\";import{useSelector,useDispatch}from\"react-redux\";import{personalInfoSelector}from\"../ProfileBuilder/PersonalInfo/selector\";import{getCurrentPersonalInfo,loadMasterData}from\"../ProfileBuilder/PersonalInfo/action\";import useConfiguration from\"../../hooks/useConfiguration\";import useSessionStorage from\"../../hooks/useSessionStorage\";import Modal from\"../Summary/modal\";import EditEmail from\"./editEmail\";import useValidation from\"../../hooks/useValidation\";import'./account.css';import requestUtil from\"../../helpers/requestUtil\";import{setLoadingPageFalse,setLoadingPageTrue}from\"../common/Loader/action\";import Error from\"../common/Message/error\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default(function(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),changeEmail=_useState2[0],setChangeEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newEmail=_useState4[0],setNewEmail=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),formErrors=_useState6[0],setFormErrors=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),registrationErrors=_useState8[0],setRegistrationErrors=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];var config=useConfiguration();var storage=useSessionStorage();var dispatch=useDispatch();var validate=useValidation();var login=storage.getItem(\"login\");var _useSelector=useSelector(personalInfoSelector),data=_useSelector.data;var navigate=useNavigate();var loadPersonalInfo=function loadPersonalInfo(){return dispatch(getCurrentPersonalInfo({url:\"\".concat(config.baseUrl,\"/Candidates/getpersonalinfo\"),userId:login.candidateId}));};useEffect(function(){document.title=\"Overture Account\";if(config.baseUrl&&!data.candidateId){dispatch(loadMasterData(\"\".concat(config.baseUrl))).then(function(){loadPersonalInfo();});}},[config]);var deactivateAccount=function deactivateAccount(event){event.preventDefault();dispatch(setLoadingPageTrue());requestUtil(\"\".concat(config.baseUrl,\"/Candidates/deactivate/\").concat(login.candidateId),'POST').then(function(response){dispatch(logOut()).then(function(){dispatch(setLoadingPageFalse());navigate(\"/\");window.location.reload();});}).catch(function(error){dispatch(setLoadingPageFalse());setErrorMessage(error.message);});};var deleteAccount=function deleteAccount(event){event.preventDefault();dispatch(setLoadingPageTrue());requestUtil(\"\".concat(config.baseUrl,\"/Candidates/deleteaccount/\").concat(login.candidateId),'POST').then(function(response){dispatch(logOut()).then(function(){dispatch(setLoadingPageFalse());navigate(\"/\");window.location.reload();});}).catch(function(error){dispatch(setLoadingPageFalse());setErrorMessage(error.message);});};var editEmail=function editEmail(event){event.preventDefault();setChangeEmail(!changeEmail);setNewEmail('');setErrorMessage('');setMessage('');};var updateEmail=function updateEmail(target){setNewEmail(target.value);};var validateEmail=function validateEmail(){var result=validate(\"updateEmail\",[{'name':'email',data:newEmail}]);if(result.valid){setFormErrors({});}else{setFormErrors(result.errors);}if(newEmail===data.email){setFormErrors({\"email\":['New email should not be same as old email']});return false;}return result.valid;};var saveEmail=function saveEmail(event){event.preventDefault();if(validateEmail()){dispatch(setLoadingPageTrue());requestUtil(\"\".concat(config.baseUrl,\"/Candidates/updateemailid\"),\"POST\",{candidateId:login.candidateId,oldEmailId:login.email,newEmailId:newEmail}).then(function(response){setMessage(response.message);requestUtil(\"\".concat(config.baseUrl,\"/Candidates/sendmail-for-changeemailid\"),\"POST\",{candidateId:login.candidateId,oldEmailId:login.email,newEmailId:newEmail}).then(function(response){dispatch(getCurrentPersonalInfo({url:\"\".concat(config.baseUrl,\"/Candidates/getpersonalinfo\"),userId:login.candidateId})).then(function(){dispatch(setLoadingPageFalse());});}).catch(function(error){setErrorMessage(error.message||\"Failed to send email\");dispatch(setLoadingPageFalse());});}).catch(function(error){setErrorMessage(error.message||\"Failed to update email\");dispatch(setLoadingPageFalse());});}};var validatePersonalInfo=function validatePersonalInfo(){var keys=Object.keys(data);var registrationResult=validate(\"personalInfo\",keys.map(function(key){return{name:key,data:data[key]};}));if(registrationResult.valid){setRegistrationErrors({});}else{setRegistrationErrors(registrationResult.errors);}return registrationResult.valid;};var savePersonalInfo=function savePersonalInfo(){if(validatePersonalInfo()){dispatch(setLoadingPageTrue());requestUtil(\"\".concat(config.baseUrl,\"/Candidates/savemyaccountinfo\"),\"POST\",_objectSpread({candidateId:login.candidateId},data)).then(function(response){setMessage(response.message);setLoadingPageFalse();loadPersonalInfo();}).catch(function(error){setErrorMessage(error.message||\"Failed to update personal info\");dispatch(setLoadingPageFalse());});}};var cancelEdit=function cancelEdit(){loadPersonalInfo();};return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"page-main\",children:[/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"main-content app-content mt-0 main-background\",children:/*#__PURE__*/_jsx(\"div\",{className:\"side-app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-container container-fluid\",children:[/*#__PURE__*/_jsx(PageHeader,{previous:\"Dashboard\",current:\"Profile Builder\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[errorMessage&&!changeEmail?/*#__PURE__*/_jsx(Error,{errorMessage:errorMessage}):null,/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[changeEmail&&/*#__PURE__*/_jsx(Modal,{label:\"Email Update\",showHide:editEmail,size:\"md\",saveFunction:saveEmail,children:/*#__PURE__*/_jsx(EditEmail,{updateValue:updateEmail,newEmail:newEmail,errors:formErrors['email'],errorMessage:errorMessage,message:message})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-xl-8\",children:[/*#__PURE__*/_jsx(Registration,_objectSpread(_objectSpread({title:\"My Info\"},data),{},{errors:registrationErrors,saveContinue:savePersonalInfo,cancel:cancelEdit})),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:\"Deactivate Account\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"When you de-activate you can come back anytime to re-activate\"}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-control custom-checkbox mb-0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer text-end\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:deactivateAccount,className:\"btn btn-primary my-1\",children:\"Deactivate\"}),\"\\xA0\",/*#__PURE__*/_jsx(\"a\",{href:\"javascript:void(0)\",className:\"btn btn-danger my-1\",children:\"Cancel\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:\"Edit Contact\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center chat-image mb-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar avatar-xxl chat-profile mb-3 brround\",children:/*#__PURE__*/_jsx(\"a\",{className:\"\",href:\"#\",onClick:function onClick(event){event.preventDefault();navigate(\"/profile\");},children:/*#__PURE__*/_jsx(\"img\",{alt:\"avatar\",src:\"/assets/images/users/7.jpg\",className:\"brround\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-chat-msg-name\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"profile.html\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-1 text-dark fw-semibold\",children:\"\".concat(data.firstName,\" \").concat(data.lastName)})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mt-0 mb-0 pt-0 fs-13\",children:\"Registered nurse\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body no-padding\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"social social-profile-buttons\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"social-icon text-primary\",href:\"\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fe fe-mail\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"my-auto\",children:data.email}),/*#__PURE__*/_jsx(\"button\",{id:\"bAcep\",type:\"button\",className:\"btn  btn-sm\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#modaldemo8\",title:\"Edit email\",onClick:editEmail,children:/*#__PURE__*/_jsx(\"i\",{className:\"fe fe-edit\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"social social-profile-buttons\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"social-icon text-primary\",href:\"\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fe fe-phone\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"my-auto\",children:data.cellPhoneNumber})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer text-end\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"javascript:void(0)\",className:\"btn btn-primary my-1\",children:\"Update\"}),\"\\xA0\",/*#__PURE__*/_jsx(\"a\",{href:\"javascript:void(0)\",className:\"btn btn-danger my-1\",children:\"Cancel\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:\"Delete Account\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"when you delete account, you will lose all your profile and associated information\"}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-control custom-checkbox mb-0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer text-end\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"btn btn-primary my-1\",onClick:deleteAccount,children:\"Delete Account\"}),\"\\xA0\",/*#__PURE__*/_jsx(\"a\",{href:\"javascript:void(0)\",className:\"btn btn-danger my-1\",children:\"Cancel\"})]})]})})]})]})})]})]})})})]})});});","map":{"version":3,"sources":["D:/projects/Overture/DevOTWebUI/src/components/Account/index.js"],"names":["Loader","Header","Sidebar","React","useEffect","useState","useNavigate","logOut","PageHeader","Registration","useSelector","useDispatch","personalInfoSelector","getCurrentPersonalInfo","loadMasterData","useConfiguration","useSessionStorage","Modal","EditEmail","useValidation","requestUtil","setLoadingPageFalse","setLoadingPageTrue","Error","changeEmail","setChangeEmail","newEmail","setNewEmail","formErrors","setFormErrors","registrationErrors","setRegistrationErrors","message","setMessage","errorMessage","setErrorMessage","config","storage","dispatch","validate","login","getItem","data","navigate","loadPersonalInfo","url","baseUrl","userId","candidateId","document","title","then","deactivateAccount","event","preventDefault","response","window","location","reload","catch","error","deleteAccount","editEmail","updateEmail","target","value","validateEmail","result","valid","errors","email","saveEmail","oldEmailId","newEmailId","validatePersonalInfo","keys","Object","registrationResult","map","key","name","savePersonalInfo","cancelEdit","firstName","lastName","cellPhoneNumber"],"mappings":"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","sourcesContent":["import Loader from \"../common/Loader\";\nimport Header from \"../common/Header\";\nimport Sidebar from \"../common/Sidebar\";\nimport React, {useEffect, useState} from \"react\";\nimport {useNavigate} from \"react-router-dom\";\nimport {logOut} from \"../Login/action\";\nimport PageHeader from \"../ProfileBuilder/pageHeader\";\nimport Registration from \"../Summary/registration\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport {personalInfoSelector} from \"../ProfileBuilder/PersonalInfo/selector\";\nimport {getCurrentPersonalInfo, loadMasterData} from \"../ProfileBuilder/PersonalInfo/action\";\nimport useConfiguration from \"../../hooks/useConfiguration\";\nimport useSessionStorage from \"../../hooks/useSessionStorage\";\nimport Modal from \"../Summary/modal\";\nimport EditEmail from \"./editEmail\";\nimport useValidation from \"../../hooks/useValidation\";\nimport './account.css';\nimport requestUtil from \"../../helpers/requestUtil\";\nimport {setLoadingPageFalse, setLoadingPageTrue} from \"../common/Loader/action\";\nimport Error from \"../common/Message/error\";\n\nexport default () => {\n    const [changeEmail, setChangeEmail] = useState(false);\n    const [newEmail, setNewEmail] = useState('');\n    const [formErrors, setFormErrors] = useState({});\n    const [registrationErrors, setRegistrationErrors] = useState({});\n    const [message, setMessage] = useState(\"\");\n    const [errorMessage, setErrorMessage] = useState(\"\");\n    const config = useConfiguration();\n    const storage = useSessionStorage();\n    const dispatch = useDispatch();\n    const validate = useValidation();\n    const login = storage.getItem(\"login\");\n    const { data } = useSelector(personalInfoSelector);\n    const navigate = useNavigate();\n    const loadPersonalInfo = () => dispatch(getCurrentPersonalInfo({\n        url: `${config.baseUrl}/Candidates/getpersonalinfo`, userId: login.candidateId\n    }));\n    useEffect(() =>{\n        document.title=\"Overture Account\";\n        if(config.baseUrl && !data.candidateId) {\n            dispatch(loadMasterData(`${config.baseUrl}`)).then(() => {\n                loadPersonalInfo();\n            })\n        }\n    }, [config]);\n    const deactivateAccount = (event) => {\n        event.preventDefault();\n        dispatch(setLoadingPageTrue());\n        requestUtil(`${config.baseUrl}/Candidates/deactivate/${login.candidateId}`, 'POST').then(response => {\n            dispatch(logOut()).then(() => {\n                    dispatch(setLoadingPageFalse());\n                    navigate(\"/\")\n                    window.location.reload();\n                }\n            );\n        }).catch(error => {\n            dispatch(setLoadingPageFalse());\n            setErrorMessage(error.message);\n        });\n    }\n    const deleteAccount = (event) => {\n        event.preventDefault();\n        dispatch(setLoadingPageTrue());\n        requestUtil(`${config.baseUrl}/Candidates/deleteaccount/${login.candidateId}`, 'POST').then(response => {\n            dispatch(logOut()).then(() => {\n                    dispatch(setLoadingPageFalse());\n                    navigate(\"/\");\n                    window.location.reload();\n                }\n            );\n        }).catch(error => {\n            dispatch(setLoadingPageFalse());\n            setErrorMessage(error.message);\n        });\n    }\n    const editEmail = (event) => {\n        event.preventDefault();\n        setChangeEmail(!changeEmail);\n        setNewEmail('');\n        setErrorMessage('');\n        setMessage('');\n    }\n    const updateEmail = (target) => {\n        setNewEmail(target.value);\n    }\n    const validateEmail = () => {\n        const result = validate(\"updateEmail\", [{'name': 'email', data: newEmail}]);\n        if (result.valid) {\n            setFormErrors({});\n        } else {\n            setFormErrors(result.errors);\n        }\n        if(newEmail===data.email) {\n            setFormErrors({\"email\": ['New email should not be same as old email']});\n            return false;\n        }\n        return result.valid;\n    }\n    const saveEmail = (event) => {\n        event.preventDefault();\n        if(validateEmail()){\n            dispatch(setLoadingPageTrue());\n            requestUtil(`${config.baseUrl}/Candidates/updateemailid`, \"POST\", {\n                candidateId: login.candidateId,\n                oldEmailId: login.email,\n                newEmailId: newEmail\n            }).then(response => {\n                setMessage(response.message);\n                requestUtil(`${config.baseUrl}/Candidates/sendmail-for-changeemailid`, \"POST\", {\n                    candidateId: login.candidateId,\n                    oldEmailId: login.email,\n                    newEmailId: newEmail\n                }).then(response => {\n                    dispatch(getCurrentPersonalInfo({\n                        url: `${config.baseUrl}/Candidates/getpersonalinfo`, userId: login.candidateId\n                    })).then(() => {\n                        dispatch(setLoadingPageFalse());\n                    });\n                }).catch(error => {\n                    setErrorMessage(error.message || \"Failed to send email\");\n                    dispatch(setLoadingPageFalse());\n                })\n            }).catch(error => {\n                setErrorMessage(error.message || \"Failed to update email\");\n                dispatch(setLoadingPageFalse());\n            });\n        }\n    }\n    const validatePersonalInfo = () => {\n        const keys = Object.keys(data);\n        const registrationResult = validate(\"personalInfo\", keys.map(key => {\n            return {\n                name: key, data: data[key]\n            }\n        }));\n        if (registrationResult.valid) {\n            setRegistrationErrors({});\n        } else {\n            setRegistrationErrors(registrationResult.errors);\n        }\n        return registrationResult.valid;\n    }\n    const savePersonalInfo = () => {\n        if(validatePersonalInfo()){\n            dispatch(setLoadingPageTrue());\n            requestUtil(`${config.baseUrl}/Candidates/savemyaccountinfo`, \"POST\", {\n                candidateId: login.candidateId,\n                ...data\n            }).then(response => {\n                setMessage(response.message);\n                setLoadingPageFalse();\n                loadPersonalInfo();\n            }).catch(error => {\n                setErrorMessage(error.message || \"Failed to update personal info\");\n                dispatch(setLoadingPageFalse());\n            });\n        }\n    }\n    const cancelEdit = () => {\n        loadPersonalInfo();\n    }\n    return (\n    <div className=\"page\">\n        <div className=\"page-main\">\n            <Loader/>\n            <Header/>\n            <Sidebar/>\n            <div className=\"main-content app-content mt-0 main-background\">\n                <div className=\"side-app\">\n                    <div className=\"main-container container-fluid\">\n                        <PageHeader previous={\"Dashboard\"} current={\"Profile Builder\"}/>\n                        <div className=\"row\">\n                            {\n                                errorMessage && !changeEmail ?\n                                    <Error errorMessage={errorMessage} />\n                                    : null\n                            }\n                            <div className=\"col-xl-12\">\n                                <div className=\"card\">\n                                    {\n                                        changeEmail &&\n                                        <Modal label={\"Email Update\"} showHide={editEmail} size={\"md\"} saveFunction={saveEmail}>\n                                            <EditEmail updateValue={updateEmail} newEmail={newEmail} errors={formErrors['email']}\n                                                       errorMessage={errorMessage} message={message}/>\n                                        </Modal>\n                                    }\n                                    <div className=\"row\">\n                                        <div className=\"col-xl-8\">\n                                            <Registration title={\"My Info\"} {...data} errors={registrationErrors}\n                                                          saveContinue={savePersonalInfo} cancel={cancelEdit}/>\n                                            <div className=\"card\">\n                                                <div className=\"card-header\">\n                                                    <div className=\"card-title\">Deactivate Account</div>\n                                                </div>\n                                                <div className=\"card-body\">\n                                                    <p>When you de-activate you can come back anytime to re-activate</p>\n                                                    <label className=\"custom-control custom-checkbox mb-0\">\n                                                    </label>\n                                                </div>\n                                                <div className=\"card-footer text-end\">\n                                                    <a href=\"#\" onClick={deactivateAccount}\n                                                       className=\"btn btn-primary my-1\">Deactivate</a>&nbsp;\n                                                    <a href=\"javascript:void(0)\" className=\"btn btn-danger my-1\">Cancel</a>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"col-xl-4\">\n                                            <div className=\"card\">\n                                                <div className=\"card-header\">\n                                                    <div className=\"card-title\">Edit Contact</div>\n                                                </div>\n                                                <div className=\"card-body\">\n                                                    <div className=\"text-center chat-image mb-5\">\n                                                        <div className=\"avatar avatar-xxl chat-profile mb-3 brround\">\n                                                            <a className=\"\" href=\"#\" onClick={(event => {\n                                                                event.preventDefault();\n                                                                navigate(\"/profile\");\n                                                            })}>\n                                                                <img alt=\"avatar\" src=\"/assets/images/users/7.jpg\"\n                                                                     className=\"brround\"/>\n                                                            </a>\n                                                        </div>\n                                                        <div className=\"main-chat-msg-name\">\n                                                            <a href=\"profile.html\">\n                                                                <h5 className=\"mb-1 text-dark fw-semibold\">{`${data.firstName} ${data.lastName}`}</h5>\n                                                            </a>\n                                                            <p className=\"text-muted mt-0 mb-0 pt-0 fs-13\">Registered nurse</p>\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"card-body no-padding\">\n                                                        <div className=\"social social-profile-buttons\">\n                                                            <a className=\"social-icon text-primary\" href=\"\"><i className=\"fe fe-mail\"></i></a>\n                                                            <span className=\"my-auto\">{data.email}</span>\n                                                            <button id=\"bAcep\" type=\"button\" className=\"btn  btn-sm\"\n                                                                    data-bs-toggle=\"modal\" data-bs-target=\"#modaldemo8\"\n                                                                    title=\"Edit email\" onClick={editEmail}>\n                                                                <i className=\"fe fe-edit\"></i>\n                                                            </button>\n                                                        </div>\n                                                        <div className=\"social social-profile-buttons\">\n                                                            <a className=\"social-icon text-primary\" href=\"\"><i\n                                                                className=\"fe fe-phone\"></i></a>\n                                                            <span className=\"my-auto\">{data.cellPhoneNumber}</span>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div className=\"card-footer text-end\">\n                                                    <a href=\"javascript:void(0)\" className=\"btn btn-primary my-1\">Update</a>&nbsp;\n                                                    <a href=\"javascript:void(0)\" className=\"btn btn-danger my-1\">Cancel</a>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"col-xl-8\">\n                                            <div className=\"card\">\n                                                <div className=\"card-header\">\n                                                    <div className=\"card-title\">Delete Account</div>\n                                                </div>\n                                                <div className=\"card-body\">\n                                                    <p>when you delete account, you will lose all your profile and\n                                                        associated\n                                                        information</p>\n                                                    <label className=\"custom-control custom-checkbox mb-0\">\n                                                    </label>\n                                                </div>\n                                                <div className=\"card-footer text-end\">\n                                                    <a href=\"#\" className=\"btn btn-primary my-1\" onClick={deleteAccount}>Delete\n                                                        Account</a>&nbsp;\n                                                    <a href=\"javascript:void(0)\" className=\"btn btn-danger my-1\">Cancel</a>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}