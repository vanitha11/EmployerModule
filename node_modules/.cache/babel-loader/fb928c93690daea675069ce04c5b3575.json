{"ast":null,"code":"import _asyncToGenerator from\"D:/projects/Overture/DevOTWebUI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"D:\\\\projects\\\\Overture\\\\DevOTWebUI\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{setHolidayPreference,setPreferredWorkDays,setTravelDistance,setVaccination,addPreferredShifts,setMasterDatas,loadPreferencedata,removePreferredShifts}from'./slice';import{setLoading}from\"../../common/Loader/slice\";import{nextTab}from\"../action\";import requestUtil from\"../../../helpers/requestUtil\";import{stateToServer}from\"./transformer\";import{setError}from\"../slice\";import{updateProfileFlag}from\"../../Login/action\";export function updateHolidayPreference(value){return function(dispatch){dispatch(setHolidayPreference(value));};}export function updatePreferredWorkDays(value){return function(dispatch){dispatch(setPreferredWorkDays(value));};}export function updateTravelDistance(value){return function(dispatch){dispatch(setTravelDistance(value));};}export function updateVaccination(value){return function(dispatch){dispatch(setVaccination(value));};}export function updatePreferredShifts(value,action){return function(dispatch){switch(action){case'add':dispatch(addPreferredShifts(value));break;case'remove':dispatch(removePreferredShifts(value));break;default:break;}};}export function getMasterData(baseUrl){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var shifts,travelDistance,preferredWorkDays,holidayPreference,covidVaccine,keyIndex,formattedHolidays,formattedWorkdays;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setLoading(true));_context.prev=1;_context.next=4;return requestUtil(\"\".concat(baseUrl,\"/Dropdown/GetPreferredShifts\"),'GET');case 4:shifts=_context.sent;_context.next=7;return requestUtil(\"\".concat(baseUrl,\"/Dropdown/GetTravelDistances\"),'GET');case 7:travelDistance=_context.sent;_context.next=10;return requestUtil(\"\".concat(baseUrl,\"/Dropdown/GetPreferredWorkDays\"),'GET');case 10:preferredWorkDays=_context.sent;_context.next=13;return requestUtil(\"\".concat(baseUrl,\"/Dropdown/GetWillingtoworkholidays\"),'GET');case 13:holidayPreference=_context.sent;_context.next=16;return requestUtil(\"\".concat(baseUrl,\"/Dropdown/GetCovidvaccinated\"),'GET');case 16:covidVaccine=_context.sent;keyIndex=0;formattedHolidays=holidayPreference.reduce(function(acc,curr,index){if(index%3===0){keyIndex++;acc[\"row\".concat(keyIndex)]=[curr];}else{acc[\"row\".concat(keyIndex)].push(curr);}return acc;},{});formattedWorkdays=preferredWorkDays.reduce(function(acc,curr,index){if(index%3===0){keyIndex++;acc[\"row\".concat(keyIndex)]=[curr];}else{acc[\"row\".concat(keyIndex)].push(curr);}return acc;},{});dispatch(setLoading(false));dispatch(setMasterDatas({shifts:shifts,travelDistance:travelDistance,preferredWorkDays:formattedWorkdays,preferredWorkDaysRaw:preferredWorkDays,holidayPreference:formattedHolidays,covidVaccine:covidVaccine,holidayPreferenceRaw:holidayPreference}));_context.next=28;break;case 24:_context.prev=24;_context.t0=_context[\"catch\"](1);dispatch(setLoading(false));dispatch(setError(_context.t0.message));case 28:case\"end\":return _context.stop();}}},_callee,null,[[1,24]]);}));return function(_x){return _ref.apply(this,arguments);};}();}export function savePreference(_ref2){var url=_ref2.url,userId=_ref2.userId,candidateId=_ref2.candidateId,_ref2$gotoNextTab=_ref2.gotoNextTab,gotoNextTab=_ref2$gotoNextTab===void 0?true:_ref2$gotoNextTab;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var stateData,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(setLoading(true));stateData=getState().preference;data=stateToServer(stateData,candidateId,userId);_context2.prev=3;_context2.next=6;return requestUtil(\"\".concat(url,\"/Candidates/savepreferenceinfo\"),'POST',data);case 6:if(gotoNextTab){dispatch(nextTab());dispatch(updateProfileFlag('isPreferenceInfoCompleted'));}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](3);dispatch(setError(_context2.t0.message));case 12:dispatch(setLoading(false));case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[3,9]]);}));return function(_x2,_x3){return _ref3.apply(this,arguments);};}();}export function getPreference(baseUrl,userId){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(setLoading(true));_context3.prev=1;_context3.next=4;return requestUtil(\"\".concat(baseUrl,\"/Candidates/getpreferenceinfo/\").concat(userId),'GET');case 4:data=_context3.sent;dispatch(setLoading(false));dispatch(loadPreferencedata(data));_context3.next=13;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);dispatch(setLoading(false));dispatch(setError(_context3.t0.message));case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();}","map":{"version":3,"sources":["D:/projects/Overture/DevOTWebUI/src/components/ProfileBuilder/Preference/action.js"],"names":["setHolidayPreference","setPreferredWorkDays","setTravelDistance","setVaccination","addPreferredShifts","setMasterDatas","loadPreferencedata","removePreferredShifts","setLoading","nextTab","requestUtil","stateToServer","setError","updateProfileFlag","updateHolidayPreference","value","dispatch","updatePreferredWorkDays","updateTravelDistance","updateVaccination","updatePreferredShifts","action","getMasterData","baseUrl","shifts","travelDistance","preferredWorkDays","holidayPreference","covidVaccine","keyIndex","formattedHolidays","reduce","acc","curr","index","push","formattedWorkdays","preferredWorkDaysRaw","holidayPreferenceRaw","message","savePreference","url","userId","candidateId","gotoNextTab","getState","stateData","preference","data","getPreference"],"mappings":"qPAAA,OACIA,oBADJ,CAEIC,oBAFJ,CAGIC,iBAHJ,CAIIC,cAJJ,CAKIC,kBALJ,CAMIC,cANJ,CAOIC,kBAPJ,CAQIC,qBARJ,KASO,SATP,CAUA,OAAQC,UAAR,KAAyB,2BAAzB,CACA,OAAQC,OAAR,KAAsB,WAAtB,CACA,MAAOC,CAAAA,WAAP,KAAwB,8BAAxB,CACA,OAAQC,aAAR,KAA4B,eAA5B,CACA,OAAQC,QAAR,KAAuB,UAAvB,CACA,OAAQC,iBAAR,KAAgC,oBAAhC,CAEA,MAAO,SAASC,CAAAA,uBAAT,CAAiCC,KAAjC,CAAwC,CAC3C,MAAO,UAACC,QAAD,CAAc,CACjBA,QAAQ,CAAChB,oBAAoB,CAACe,KAAD,CAArB,CAAR,CACH,CAFD,CAGH,CAED,MAAO,SAASE,CAAAA,uBAAT,CAAiCF,KAAjC,CAAwC,CAC3C,MAAO,UAACC,QAAD,CAAc,CACjBA,QAAQ,CAACf,oBAAoB,CAACc,KAAD,CAArB,CAAR,CACH,CAFD,CAGH,CAED,MAAO,SAASG,CAAAA,oBAAT,CAA8BH,KAA9B,CAAqC,CACxC,MAAO,UAACC,QAAD,CAAc,CACjBA,QAAQ,CAACd,iBAAiB,CAACa,KAAD,CAAlB,CAAR,CACH,CAFD,CAGH,CAED,MAAO,SAASI,CAAAA,iBAAT,CAA2BJ,KAA3B,CAAkC,CACrC,MAAO,UAACC,QAAD,CAAc,CACjBA,QAAQ,CAACb,cAAc,CAACY,KAAD,CAAf,CAAR,CACH,CAFD,CAGH,CAED,MAAO,SAASK,CAAAA,qBAAT,CAA+BL,KAA/B,CAAsCM,MAAtC,CAA8C,CACjD,MAAO,UAACL,QAAD,CAAc,CACjB,OAAQK,MAAR,EACI,IAAK,KAAL,CACIL,QAAQ,CAACZ,kBAAkB,CAACW,KAAD,CAAnB,CAAR,CACA,MACJ,IAAK,QAAL,CACIC,QAAQ,CAACT,qBAAqB,CAACQ,KAAD,CAAtB,CAAR,CACA,MACJ,QACI,MARR,CAUH,CAXD,CAYH,CAED,MAAO,SAASO,CAAAA,aAAT,CAAuBC,OAAvB,CAAgC,CACnC,+FAAO,iBAAOP,QAAP,0OACHA,QAAQ,CAACR,UAAU,CAAC,IAAD,CAAX,CAAR,CADG,sCAGsBE,CAAAA,WAAW,WAAIa,OAAJ,iCAA2C,KAA3C,CAHjC,QAGOC,MAHP,qCAI8Bd,CAAAA,WAAW,WAAIa,OAAJ,iCAA2C,KAA3C,CAJzC,QAIOE,cAJP,sCAKiCf,CAAAA,WAAW,WAAIa,OAAJ,mCAA6C,KAA7C,CAL5C,SAKOG,iBALP,sCAMiChB,CAAAA,WAAW,WAAIa,OAAJ,uCAAiD,KAAjD,CAN5C,SAMOI,iBANP,sCAO4BjB,CAAAA,WAAW,WAAIa,OAAJ,iCAA2C,KAA3C,CAPvC,SAOOK,YAPP,eAQKC,QARL,CAQgB,CARhB,CASOC,iBATP,CAS2BH,iBAAiB,CAACI,MAAlB,CAAyB,SAACC,GAAD,CAAMC,IAAN,CAAYC,KAAZ,CAAsB,CACrE,GAAIA,KAAK,CAAG,CAAR,GAAc,CAAlB,CAAqB,CACjBL,QAAQ,GACRG,GAAG,cAAOH,QAAP,EAAH,CAAwB,CAACI,IAAD,CAAxB,CACH,CAHD,IAGO,CACHD,GAAG,cAAOH,QAAP,EAAH,CAAsBM,IAAtB,CAA2BF,IAA3B,EACH,CACD,MAAOD,CAAAA,GAAP,CACH,CARyB,CAQvB,EARuB,CAT3B,CAmBOI,iBAnBP,CAmB2BV,iBAAiB,CAACK,MAAlB,CAAyB,SAACC,GAAD,CAAMC,IAAN,CAAYC,KAAZ,CAAsB,CACrE,GAAIA,KAAK,CAAG,CAAR,GAAc,CAAlB,CAAqB,CACjBL,QAAQ,GACRG,GAAG,cAAOH,QAAP,EAAH,CAAwB,CAACI,IAAD,CAAxB,CACH,CAHD,IAGO,CACHD,GAAG,cAAOH,QAAP,EAAH,CAAsBM,IAAtB,CAA2BF,IAA3B,EACH,CACD,MAAOD,CAAAA,GAAP,CACH,CARyB,CAQvB,EARuB,CAnB3B,CA6BChB,QAAQ,CAACR,UAAU,CAAC,KAAD,CAAX,CAAR,CACAQ,QAAQ,CAACX,cAAc,CAAC,CACpBmB,MAAM,CAANA,MADoB,CAEpBC,cAAc,CAAdA,cAFoB,CAGpBC,iBAAiB,CAAEU,iBAHC,CAIpBC,oBAAoB,CAAEX,iBAJF,CAKpBC,iBAAiB,CAAEG,iBALC,CAMpBF,YAAY,CAAZA,YANoB,CAOpBU,oBAAoB,CAAEX,iBAPF,CAAD,CAAf,CAAR,CA9BD,iFAwCCX,QAAQ,CAACR,UAAU,CAAC,KAAD,CAAX,CAAR,CACAQ,QAAQ,CAACJ,QAAQ,CAAC,YAAM2B,OAAP,CAAT,CAAR,CAzCD,qEAAP,+DA4CH,CAED,MAAO,SAASC,CAAAA,cAAT,OAAwE,IAA/CC,CAAAA,GAA+C,OAA/CA,GAA+C,CAA1CC,MAA0C,OAA1CA,MAA0C,CAAlCC,WAAkC,OAAlCA,WAAkC,yBAArBC,WAAqB,CAArBA,WAAqB,4BAAP,IAAO,mBAC3E,gGAAO,kBAAO5B,QAAP,CAAiB6B,QAAjB,yIACH7B,QAAQ,CAACR,UAAU,CAAC,IAAD,CAAX,CAAR,CACMsC,SAFH,CAEeD,QAAQ,GAAGE,UAF1B,CAGGC,IAHH,CAGUrC,aAAa,CAACmC,SAAD,CAAYH,WAAZ,CAAyBD,MAAzB,CAHvB,yCAKOhC,CAAAA,WAAW,WAAI+B,GAAJ,mCAAyC,MAAzC,CAAiDO,IAAjD,CALlB,QAMC,GAAIJ,WAAJ,CAAiB,CACb5B,QAAQ,CAACP,OAAO,EAAR,CAAR,CACAO,QAAQ,CAACH,iBAAiB,CAAC,2BAAD,CAAlB,CAAR,CACH,CATF,mFAWCG,QAAQ,CAACJ,QAAQ,CAAC,aAAM2B,OAAP,CAAT,CAAR,CAXD,QAaHvB,QAAQ,CAACR,UAAU,CAAC,KAAD,CAAX,CAAR,CAbG,sEAAP,qEAeH,CAED,MAAO,SAASyC,CAAAA,aAAT,CAAuB1B,OAAvB,CAAgCmB,MAAhC,CAAwC,CAC3C,gGAAO,kBAAO1B,QAAP,+HACHA,QAAQ,CAACR,UAAU,CAAC,IAAD,CAAX,CAAR,CADG,wCAGoBE,CAAAA,WAAW,WAAIa,OAAJ,0CAA4CmB,MAA5C,EAAsD,KAAtD,CAH/B,QAGOM,IAHP,gBAIChC,QAAQ,CAACR,UAAU,CAAC,KAAD,CAAX,CAAR,CACAQ,QAAQ,CAACV,kBAAkB,CAAC0C,IAAD,CAAnB,CAAR,CALD,mFAOChC,QAAQ,CAACR,UAAU,CAAC,KAAD,CAAX,CAAR,CACAQ,QAAQ,CAACJ,QAAQ,CAAC,aAAM2B,OAAP,CAAT,CAAR,CARD,sEAAP,iEAWH","sourcesContent":["import {\n    setHolidayPreference,\n    setPreferredWorkDays,\n    setTravelDistance,\n    setVaccination,\n    addPreferredShifts,\n    setMasterDatas,\n    loadPreferencedata,\n    removePreferredShifts\n} from './slice';\nimport {setLoading} from \"../../common/Loader/slice\";\nimport {nextTab} from \"../action\";\nimport requestUtil from \"../../../helpers/requestUtil\";\nimport {stateToServer} from \"./transformer\";\nimport {setError} from \"../slice\";\nimport {updateProfileFlag} from \"../../Login/action\";\n\nexport function updateHolidayPreference(value) {\n    return (dispatch) => {\n        dispatch(setHolidayPreference(value));\n    };\n}\n\nexport function updatePreferredWorkDays(value) {\n    return (dispatch) => {\n        dispatch(setPreferredWorkDays(value));\n    };\n}\n\nexport function updateTravelDistance(value) {\n    return (dispatch) => {\n        dispatch(setTravelDistance(value));\n    };\n}\n\nexport function updateVaccination(value) {\n    return (dispatch) => {\n        dispatch(setVaccination(value));\n    };\n}\n\nexport function updatePreferredShifts(value, action) {\n    return (dispatch) => {\n        switch (action) {\n            case 'add':\n                dispatch(addPreferredShifts(value));\n                break;\n            case 'remove':\n                dispatch(removePreferredShifts(value));\n                break;\n            default:\n                break;\n        }\n    };\n}\n\nexport function getMasterData(baseUrl) {\n    return async (dispatch) => {\n        dispatch(setLoading(true));\n        try {\n            const shifts = await requestUtil(`${baseUrl}/Dropdown/GetPreferredShifts`, 'GET');\n            const travelDistance = await requestUtil(`${baseUrl}/Dropdown/GetTravelDistances`, 'GET');\n            const preferredWorkDays = await requestUtil(`${baseUrl}/Dropdown/GetPreferredWorkDays`, 'GET');\n            const holidayPreference = await requestUtil(`${baseUrl}/Dropdown/GetWillingtoworkholidays`, 'GET');\n            const covidVaccine = await requestUtil(`${baseUrl}/Dropdown/GetCovidvaccinated`, 'GET');\n            let keyIndex = 0;\n            const formattedHolidays = holidayPreference.reduce((acc, curr, index) => {\n                if (index % 3 === 0) {\n                    keyIndex++;\n                    acc[`row${keyIndex}`] = [curr];\n                } else {\n                    acc[`row${keyIndex}`].push(curr);\n                }\n                return acc;\n            }, {});\n\n            const formattedWorkdays = preferredWorkDays.reduce((acc, curr, index) => {\n                if (index % 3 === 0) {\n                    keyIndex++;\n                    acc[`row${keyIndex}`] = [curr];\n                } else {\n                    acc[`row${keyIndex}`].push(curr);\n                }\n                return acc;\n            }, {});\n\n            dispatch(setLoading(false));\n            dispatch(setMasterDatas({\n                shifts,\n                travelDistance,\n                preferredWorkDays: formattedWorkdays,\n                preferredWorkDaysRaw: preferredWorkDays,\n                holidayPreference: formattedHolidays,\n                covidVaccine,\n                holidayPreferenceRaw: holidayPreference\n            }));\n        } catch (error) {\n            dispatch(setLoading(false));\n            dispatch(setError(error.message));\n        }\n    };\n}\n\nexport function savePreference({url, userId, candidateId, gotoNextTab = true}) {\n    return async (dispatch, getState) => {\n        dispatch(setLoading(true));\n        const stateData = getState().preference;\n        const data = stateToServer(stateData, candidateId, userId);\n        try {\n            await requestUtil(`${url}/Candidates/savepreferenceinfo`, 'POST', data);\n            if (gotoNextTab) {\n                dispatch(nextTab());\n                dispatch(updateProfileFlag('isPreferenceInfoCompleted'));\n            }\n        } catch (error) {\n            dispatch(setError(error.message))\n        }\n        dispatch(setLoading(false));\n    };\n}\n\nexport function getPreference(baseUrl, userId) {\n    return async (dispatch) => {\n        dispatch(setLoading(true));\n        try {\n            const data = await requestUtil(`${baseUrl}/Candidates/getpreferenceinfo/${userId}`, 'GET');\n            dispatch(setLoading(false));\n            dispatch(loadPreferencedata(data));\n        } catch (error) {\n            dispatch(setLoading(false));\n            dispatch(setError(error.message));\n        }\n    };\n}\n"]},"metadata":{},"sourceType":"module"}