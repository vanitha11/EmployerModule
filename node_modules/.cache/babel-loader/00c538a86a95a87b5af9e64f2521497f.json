{"ast":null,"code":"import _asyncToGenerator from\"D:/projects/Overture/DevOTWebUI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"D:\\\\projects\\\\Overture\\\\DevOTWebUI\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{setHolidayPreference,setPreferredWorkDays,setTravelDistance,setVaccination,addPreferredShifts,setMasterDatas,loadPreferencedata,removePreferredShifts}from'./slice';import{setLoading}from\"../../common/Loader/slice\";import{nextTab}from\"../action\";import requestUtil from\"../../../helpers/requestUtil\";import{stateToServer}from\"./transformer\";import{setError}from\"../slice\";import{updateProfileFlag}from\"../../Login/action\";export function updateHolidayPreference(value){return function(dispatch){dispatch(setHolidayPreference(value));};}export function updatePreferredWorkDays(value){return function(dispatch){dispatch(setPreferredWorkDays(value));};}export function updateTravelDistance(value){return function(dispatch){dispatch(setTravelDistance(value));};}export function updateVaccination(value){return function(dispatch){dispatch(setVaccination(value));};}export function updatePreferredShifts(value,action){return function(dispatch){switch(action){case'add':dispatch(addPreferredShifts(value));break;case'remove':dispatch(removePreferredShifts(value));break;default:break;}};}export function getMasterData(baseUrl){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var shifts,travelDistance,preferredWorkDays,holidayPreference,covidVaccine,keyIndex,formattedHolidays;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setLoading(true));_context.prev=1;_context.next=4;return requestUtil(\"\".concat(baseUrl,\"/Dropdown/GetPreferredShifts\"),'GET');case 4:shifts=_context.sent;_context.next=7;return requestUtil(\"\".concat(baseUrl,\"/Dropdown/GetTravelDistances\"),'GET');case 7:travelDistance=_context.sent;_context.next=10;return requestUtil(\"\".concat(baseUrl,\"/Dropdown/GetPreferredWorkDays\"),'GET');case 10:preferredWorkDays=_context.sent;_context.next=13;return requestUtil(\"\".concat(baseUrl,\"/Dropdown/GetWillingtoworkholidays\"),'GET');case 13:holidayPreference=_context.sent;_context.next=16;return requestUtil(\"\".concat(baseUrl,\"/Dropdown/GetCovidvaccinated\"),'GET');case 16:covidVaccine=_context.sent;keyIndex=0;formattedHolidays=holidayPreference.reduce(function(acc,curr,index){if(index%3===0){keyIndex++;acc[\"row\".concat(keyIndex)]=[curr];}else{acc[\"row\".concat(keyIndex)].push(curr);}return acc;},{});dispatch(setLoading(false));dispatch(setMasterDatas({shifts:shifts,travelDistance:travelDistance,preferredWorkDays:preferredWorkDays,holidayPreference:formattedHolidays,covidVaccine:covidVaccine,holidayPreferenceRaw:holidayPreference}));_context.next=27;break;case 23:_context.prev=23;_context.t0=_context[\"catch\"](1);dispatch(setLoading(false));dispatch(setError(_context.t0.message));case 27:case\"end\":return _context.stop();}}},_callee,null,[[1,23]]);}));return function(_x){return _ref.apply(this,arguments);};}();}export function savePreference(_ref2){var url=_ref2.url,userId=_ref2.userId,candidateId=_ref2.candidateId,_ref2$gotoNextTab=_ref2.gotoNextTab,gotoNextTab=_ref2$gotoNextTab===void 0?true:_ref2$gotoNextTab;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var stateData,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(setLoading(true));stateData=getState().preference;data=stateToServer(stateData,candidateId,userId);_context2.prev=3;_context2.next=6;return requestUtil(\"\".concat(url,\"/Candidates/savepreferenceinfo\"),'POST',data);case 6:if(gotoNextTab){dispatch(nextTab());dispatch(updateProfileFlag('isPreferenceInfoCompleted'));}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](3);dispatch(setError(_context2.t0.message));case 12:dispatch(setLoading(false));case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[3,9]]);}));return function(_x2,_x3){return _ref3.apply(this,arguments);};}();}export function getPreference(baseUrl,userId){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(setLoading(true));_context3.prev=1;_context3.next=4;return requestUtil(\"\".concat(baseUrl,\"/Candidates/getpreferenceinfo/\").concat(userId),'GET');case 4:data=_context3.sent;dispatch(setLoading(false));dispatch(loadPreferencedata(data));_context3.next=13;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);dispatch(setLoading(false));dispatch(setError(_context3.t0.message));case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();}","map":{"version":3,"sources":["D:/projects/Overture/DevOTWebUI/src/components/ProfileBuilder/Preference/action.js"],"names":["setHolidayPreference","setPreferredWorkDays","setTravelDistance","setVaccination","addPreferredShifts","setMasterDatas","loadPreferencedata","removePreferredShifts","setLoading","nextTab","requestUtil","stateToServer","setError","updateProfileFlag","updateHolidayPreference","value","dispatch","updatePreferredWorkDays","updateTravelDistance","updateVaccination","updatePreferredShifts","action","getMasterData","baseUrl","shifts","travelDistance","preferredWorkDays","holidayPreference","covidVaccine","keyIndex","formattedHolidays","reduce","acc","curr","index","push","holidayPreferenceRaw","message","savePreference","url","userId","candidateId","gotoNextTab","getState","stateData","preference","data","getPreference"],"mappings":"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","sourcesContent":["import {\n  setHolidayPreference,\n  setPreferredWorkDays,\n  setTravelDistance,\n  setVaccination,\n  addPreferredShifts,\n  setMasterDatas,\n  loadPreferencedata,\n  removePreferredShifts\n} from './slice';\nimport {setLoading} from \"../../common/Loader/slice\";\nimport {nextTab} from \"../action\";\nimport requestUtil from \"../../../helpers/requestUtil\";\nimport { stateToServer } from \"./transformer\";\nimport { setError } from \"../slice\";\nimport {updateProfileFlag} from \"../../Login/action\";\n\nexport function updateHolidayPreference(value) {\n  return (dispatch) => {\n    dispatch(setHolidayPreference(value));\n  };\n}\nexport function updatePreferredWorkDays(value) {\n  return (dispatch) => {\n    dispatch(setPreferredWorkDays(value));\n  };\n}\nexport function updateTravelDistance(value) {\n  return (dispatch) => {\n    dispatch(setTravelDistance(value));\n  };\n}\nexport function updateVaccination(value) {\n  return (dispatch) => {\n    dispatch(setVaccination(value));\n  };\n}\n\nexport function updatePreferredShifts(value, action) {\n  return (dispatch) => {\n    switch (action) {\n      case 'add':\n        dispatch(addPreferredShifts(value));\n        break;\n      case 'remove':\n        dispatch(removePreferredShifts(value));\n        break;\n      default:\n        break;\n    }\n  };\n}\n\nexport function getMasterData(baseUrl) {\n  return async (dispatch) => {\n    dispatch(setLoading(true));\n    try {\n      const shifts = await requestUtil(`${baseUrl}/Dropdown/GetPreferredShifts`, 'GET');\n      const travelDistance = await requestUtil(`${baseUrl}/Dropdown/GetTravelDistances`, 'GET');\n      const preferredWorkDays = await requestUtil(`${baseUrl}/Dropdown/GetPreferredWorkDays`, 'GET');\n      const holidayPreference = await requestUtil(`${baseUrl}/Dropdown/GetWillingtoworkholidays`, 'GET');\n      const covidVaccine = await requestUtil(`${baseUrl}/Dropdown/GetCovidvaccinated`, 'GET');\n      let keyIndex = 0;\n      const formattedHolidays = holidayPreference.reduce((acc, curr, index) => {\n        if(index % 3 === 0){\n          keyIndex++;\n          acc[`row${keyIndex}`] = [curr];\n        } else {\n          acc[`row${keyIndex}`].push(curr);\n        }\n        return acc;\n      }, {});\n\n      dispatch(setLoading(false));\n      dispatch(setMasterDatas({\n        shifts,\n        travelDistance,\n        preferredWorkDays,\n        holidayPreference : formattedHolidays,\n        covidVaccine,\n        holidayPreferenceRaw: holidayPreference\n      }));\n    } catch (error) {\n      dispatch(setLoading(false));\n      dispatch(setError(error.message));\n    }\n  };\n}\n\nexport function savePreference({url, userId, candidateId, gotoNextTab = true}) {\n  return async (dispatch, getState) => {\n    dispatch(setLoading(true));\n    const stateData = getState().preference;\n    const data = stateToServer(stateData, candidateId, userId);\n    try {\n      await requestUtil(`${url}/Candidates/savepreferenceinfo`, 'POST', data);\n      if(gotoNextTab) {\n        dispatch(nextTab());\n        dispatch(updateProfileFlag('isPreferenceInfoCompleted'));\n      }\n    } catch (error) {\n      dispatch(setError(error.message))\n    }\n    dispatch(setLoading(false));\n  };\n}\n\nexport function getPreference(baseUrl, userId) {\n  return async (dispatch) => {\n    dispatch(setLoading(true));\n    try {\n      const data = await requestUtil(`${baseUrl}/Candidates/getpreferenceinfo/${userId}`, 'GET');\n      dispatch(setLoading(false));\n      dispatch(loadPreferencedata(data));\n    } catch (error) {\n      dispatch(setLoading(false));\n      dispatch(setError(error.message));\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}